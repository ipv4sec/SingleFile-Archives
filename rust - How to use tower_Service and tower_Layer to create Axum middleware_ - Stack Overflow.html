<!DOCTYPE html> <html itemscope itemtype=https://schema.org/QAPage class=html__responsive lang=en><!--
 Page saved with SingleFile 
 url: https://stackoverflow.com/questions/78210140/how-to-use-towerservice-and-towerlayer-to-create-axum-middleware 
 saved date: Wed Jul 31 2024 14:10:59 GMT+0800 (中国标准时间)
--><meta charset=utf-8>
<title>rust - How to use tower::Service and tower::Layer to create Axum middleware? - Stack Overflow</title>
<link rel=image_src href="https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon.png?v=c78bd457575a">
<link rel=search type=application/opensearchdescription+xml title="Stack Overflow" href=https://stackoverflow.com/opensearch.xml>
<link rel=canonical href=https://stackoverflow.com/questions/78210140/how-to-use-towerservice-and-towerlayer-to-create-axum-middleware>
<meta name=viewport content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0">
<meta property=og:type content=website>
<meta property=og:url content=https://stackoverflow.com/questions/78210140/how-to-use-towerservice-and-towerlayer-to-create-axum-middleware>
<meta property=og:site_name content="Stack Overflow">
<meta property=og:image itemprop="image primaryImageOfPage" content="https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded">
<meta name=twitter:card content=summary>
<meta name=twitter:domain content=stackoverflow.com>
<meta name=twitter:title property=og:title itemprop=name content="How to use tower::Service and tower::Layer to create Axum middleware?">
<meta name=twitter:description property=og:description itemprop=description content="I'm trying to use a custom middleware in Axum to implement JWT authentication. However, I'm unable to compile it when attempting to return an error for failed validation. Below is the JWT middleware ">
<style>html,body,div,span,h1,h2,h5,p,pre,a,code,em,img,ul,li,label,footer,nav,time{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}footer,nav{display:block}ul{list-style:none}button{margin:0}.svg-icon:not(.native) *,.svg-spot:not(.native) *{fill:currentColor}.s-anchors.s-anchors__muted{--_an-a-fc:var(--black-400);--_an-a-fc-hover:var(--black-500);--_an-a-fc-visited:var(--black-600)}.s-anchors.s-anchors__muted a:not(.s-link),.s-anchors.s-anchors__muted .s-btn.s-btn__link{color:var(--_an-a-fc,inherit)}.s-anchors.s-anchors__danger a:not(.s-link):hover,.s-anchors.s-anchors__default a:not(.s-link):hover,.s-anchors.s-anchors__grayscale a:not(.s-link):hover,.s-anchors.s-anchors__inherit a:not(.s-link):hover,.s-anchors.s-anchors__muted a:not(.s-link):hover,.s-anchors.s-anchors__danger .s-btn.s-btn__link:hover,.s-anchors.s-anchors__default .s-btn.s-btn__link:hover,.s-anchors.s-anchors__grayscale .s-btn.s-btn__link:hover,.s-anchors.s-anchors__inherit .s-btn.s-btn__link:hover,.s-anchors.s-anchors__muted .s-btn.s-btn__link:hover,.s-anchors.s-anchors__danger a:not(.s-link):active,.s-anchors.s-anchors__default a:not(.s-link):active,.s-anchors.s-anchors__grayscale a:not(.s-link):active,.s-anchors.s-anchors__inherit a:not(.s-link):active,.s-anchors.s-anchors__muted a:not(.s-link):active,.s-anchors.s-anchors__danger .s-btn.s-btn__link:active,.s-anchors.s-anchors__default .s-btn.s-btn__link:active,.s-anchors.s-anchors__grayscale .s-btn.s-btn__link:active,.s-anchors.s-anchors__inherit .s-btn.s-btn__link:active,.s-anchors.s-anchors__muted .s-btn.s-btn__link:active,.s-anchors.s-anchors__danger a:not(.s-link):hover:visited,.s-anchors.s-anchors__default a:not(.s-link):hover:visited,.s-anchors.s-anchors__grayscale a:not(.s-link):hover:visited,.s-anchors.s-anchors__inherit a:not(.s-link):hover:visited,.s-anchors.s-anchors__muted a:not(.s-link):hover:visited,.s-anchors.s-anchors__danger .s-btn.s-btn__link:hover:visited,.s-anchors.s-anchors__default .s-btn.s-btn__link:hover:visited,.s-anchors.s-anchors__grayscale .s-btn.s-btn__link:hover:visited,.s-anchors.s-anchors__inherit .s-btn.s-btn__link:hover:visited,.s-anchors.s-anchors__muted .s-btn.s-btn__link:hover:visited,.s-anchors.s-anchors__danger a:not(.s-link):active:visited,.s-anchors.s-anchors__default a:not(.s-link):active:visited,.s-anchors.s-anchors__grayscale a:not(.s-link):active:visited,.s-anchors.s-anchors__inherit a:not(.s-link):active:visited,.s-anchors.s-anchors__muted a:not(.s-link):active:visited,.s-anchors.s-anchors__danger .s-btn.s-btn__link:active:visited,.s-anchors.s-anchors__default .s-btn.s-btn__link:active:visited,.s-anchors.s-anchors__grayscale .s-btn.s-btn__link:active:visited,.s-anchors.s-anchors__inherit .s-btn.s-btn__link:active:visited,.s-anchors.s-anchors__muted .s-btn.s-btn__link:active:visited{color:var(--_an-a-fc-hover)}.s-anchors.s-anchors__danger a:not(.s-link):visited,.s-anchors.s-anchors__default a:not(.s-link):visited,.s-anchors.s-anchors__grayscale a:not(.s-link):visited,.s-anchors.s-anchors__inherit a:not(.s-link):visited,.s-anchors.s-anchors__muted a:not(.s-link):visited,.s-anchors.s-anchors__danger .s-btn.s-btn__link:visited,.s-anchors.s-anchors__default .s-btn.s-btn__link:visited,.s-anchors.s-anchors__grayscale .s-btn.s-btn__link:visited,.s-anchors.s-anchors__inherit .s-btn.s-btn__link:visited,.s-anchors.s-anchors__muted .s-btn.s-btn__link:visited{color:var(--_an-a-fc-visited,inherit)}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}@media(max-width:640px){}@media(max-width:640px){}.s-btn{--_bu-baw:var(--su-static1);--_bu-bc:transparent;--_bu-br:var(--br-md);--_bu-fc:var(--theme-button-color,var(--theme-secondary-400));--_bu-fs:var(--fs-body1);--_bu-p:.8em;--_bu-bc-active:var(--_bu-bc);--_bu-bg-active:var(--theme-button-active-background-color,var(--theme-secondary-300));--_bu-fc-active:var(--theme-button-hover-color,var(--theme-secondary-500));--_bu-bc-hover:var(--_bu-bc);--_bu-bg-hover:var(--theme-button-hover-background-color,var(--theme-secondary-200));--_bu-fc-hover:var(--theme-button-hover-color,var(--theme-secondary-500));--_bu-bg-selected:var(--theme-button-selected-background-color,var(--theme-secondary-300));--_bu-fc-selected:var(--theme-button-selected-color,var(--theme-secondary-600));--_bu-filled-bc:transparent;--_bu-filled-bg:var(--theme-button-primary-background-color,var(--theme-secondary-400));--_bu-filled-fc:var(--theme-button-primary-color,var(--white));--_bu-filled-bc-selected:transparent;--_bu-filled-bg-selected:var(--theme-button-primary-selected-background-color,var(--theme-secondary-500));--_bu-filled-fc-selected:var(--theme-button-primary-selected-color,var(--white));--_bu-filled-bc-active:var(--_bu-filled-bc);--_bu-filled-bg-active:var(--theme-button-primary-active-background-color,var(--theme-secondary-600));--_bu-filled-fc-active:var(--theme-button-primary-hover-color,var(--white));--_bu-filled-bc-hover:var(--_bu-filled-bc);--_bu-filled-bg-hover:var(--theme-button-primary-hover-background-color,var(--theme-secondary-500));--_bu-filled-fc-hover:var(--theme-button-primary-hover-color,var(--white));--_bu-outlined-bc:var(--theme-button-outlined-border-color,var(--theme-secondary-400));--_bu-outlined-bg:var(--theme-button-outlined-background-color);--_bg-outlined-fc:var(--theme-button-outlined-color,var(--theme-secondary-400));--_bu-outlined-bc-selected:var(--theme-button-outlined-selected-border-color,var(--theme-secondary-400));--_bu-outlined-bg-selected:var(--theme-button-selected-background-color,var(--theme-secondary-300));--_bu-outlined-fc-selected:var(--theme-button-selected-color,var(--theme-secondary-600));--_bu-badge-o:.5;--_bu-dropdown-bw:var(--su-static4);--_bu-number-fc:var(--white);--_bu-number-fc-filled:var(--theme-button-primary-number-color,var(--theme-secondary-600));--_bu-number-fc-selected:var(--white);background-color:var(--_bu-bg,inherit);border:var(--_bu-baw) solid var(--_bu-bc);border-radius:var(--_bu-br);box-shadow:none;color:var(--_bu-fc);font-size:var(--_bu-fs);padding:var(--_bu-py,var(--_bu-p)) var(--_bu-px,var(--_bu-p));cursor:pointer;display:inline-block;font-family:inherit;font-weight:normal;line-height:var(--lh-sm);position:relative;outline:0;text-align:center;text-decoration:none;user-select:none}.s-btn.s-btn__filled{border-color:var(--_bu-filled-bc);background-color:var(--_bu-filled-bg);color:var(--_bu-filled-fc)}.s-btn.s-btn__outlined{border-color:var(--_bu-outlined-bc);background-color:var(--_bu-outlined-bg,inherit)}.s-btn.s-btn__link,.s-btn.s-btn__unset{--_bu-baw:0;--_bu-br:0;--_bu-p:0}.s-btn.s-btn__link:focus,.s-btn.s-btn__unset:focus,.s-btn.s-btn__link:focus-visible,.s-btn.s-btn__unset:focus-visible{outline-style:auto}.s-btn.s-btn__link{--_li-fc:var(--theme-link-color,var(--theme-secondary-400));--_li-fc-hover:var(--theme-link-color-hover,var(--theme-secondary-500));--_li-fc-visited:var(--theme-link-color-visited,var(--theme-secondary-600));cursor:pointer;text-decoration:none;display:inline;font:inherit;outline:revert;text-align:inherit}.s-btn.s-btn__link,.s-btn.s-btn__link:hover,.s-btn.s-btn__link:active,.s-btn.s-btn__link:focus{--_bu-bg:none}.s-btn.s-btn__link:active,.s-btn.s-btn__link:hover{color:var(--_li-fc-hover)}button.s-btn.s-btn__link{appearance:none;background:transparent;border:0;font-family:inherit;line-height:inherit;padding:0;user-select:auto}button.s-btn.s-btn__link:focus{outline:revert}.s-btn.s-btn__unset{outline:initial}.s-btn.s-btn__unset,.s-btn.s-btn__unset:hover,.s-btn.s-btn__unset:active,.s-btn.s-btn__unset:focus{--_bu-bg:none;--_bu-fc:unset;cursor:default;font:unset;user-select:auto}.s-btn.s-btn__muted{--_bu-bc-hover:var(--black-300);--_bu-bg-active:var(--black-150);--_bu-bg-hover:var(--black-100);--_bu-bg-selected:var(--black-200);--_bu-fc:var(--black-500);--_bu-fc-active:var(--_bu-fc);--_bu-fc-hover:var(--black-500);--_bu-fc-selected:var(--black-500);--_bu-filled-bc:transparent;--_bu-filled-bc-selected:var(--_bu-filled-bc);--_bu-filled-bg:var(--black-225);--_bu-filled-bg-active:var(--black-300);--_bu-filled-bg-hover:var(--black-250);--_bu-filled-bg-selected:var(--black-350);--_bu-filled-fc:var(--black-500);--_bu-filled-fc-active:var(--_bu-filled-fc);--_bu-filled-fc-hover:var(--_bu-filled-fc);--_bu-filled-fc-selected:var(--black-600);--_bu-outlined-bc:var(--black-300);--_bu-outlined-bc-selected:var(--black-300);--_bu-outlined-bg-selected:var(--_bu-bg-selected);--_bu-outlined-fc-selected:var(--_bu-fc-selected);--_bu-number-fc-filled:var(--white);--_bu-number-fc-selected:var(--white);--_bu-bg-focus:var(--black-400);--_bu-fc-focus:var(--white);--_bu-number-fc-focus:var(--black-500)}.s-btn:not(.s-btn__link):not(.s-btn__unset):focus-visible,.s-btn--radio:focus-visible+.s-btn{border-color:var(--focus-theme) !important;box-shadow:inset 0 0 0 var(--su-static1) var(--focus-theme),inset 0 0 0 calc(var(--su-static4) - var(--su-static1)) var(--focus-neutral);outline:var(--su-static2) solid transparent !important}.s-btn:not(.s-btn--radio:checked+label):not(.s-btn__link):not(.s-btn__unset):not(.s-btn__facebook):not(.s-btn__github):not(.s-btn__google):not(.is-selected):focus-visible,.s-btn:not(.s-btn--radio:checked+label):not(.s-btn__link):not(.s-btn__unset):not(.s-btn__facebook):not(.s-btn__github):not(.s-btn__google):not(.is-selected).focus-inset-bordered{background-color:var(--_bu-bg-focus,var(--_bu-filled-bg));color:var(--_bu-fc-focus,var(--_bu-filled-fc))}.s-btn:not(.s-btn--radio:checked+label):not(.s-btn__link):not(.s-btn__unset):not(.s-btn__facebook):not(.s-btn__github):not(.s-btn__google):not(.is-selected):hover{background-color:var(--_bu-bg-hover);color:var(--_bu-fc-hover)}.s-btn:not(.s-btn--radio:checked+label):not(.s-btn__link):not(.s-btn__unset):not(.s-btn__facebook):not(.s-btn__github):not(.s-btn__google):not(.is-selected):hover.s-btn__filled{background-color:var(--_bu-filled-bg-hover);border-color:var(--_bu-filled-bc-hover);color:var(--_bu-filled-fc-hover)}.s-btn:not(.s-btn--radio:checked+label):not(.s-btn__link):not(.s-btn__unset):not(.s-btn__facebook):not(.s-btn__github):not(.s-btn__google):not(.is-selected):hover:not(.s-btn__outlined){border-color:var(--_bu-bc-hover)}.s-btn:not(.s-btn--radio:checked+label):not(.s-btn__link):not(.s-btn__unset):not(.s-btn__facebook):not(.s-btn__github):not(.s-btn__google):not(.is-selected):hover:visited:not(:hover):not(:focus){background-color:var(--_bu-bg);border-color:var(--_bu-bc);color:var(--_bu-fc)}.s-btn:not(.s-btn--radio:checked+label):not(.s-btn__link):not(.s-btn__unset):not(.s-btn__facebook):not(.s-btn__github):not(.s-btn__google):not(.is-selected):hover:visited:not(:hover):not(:focus).s-btn__filled{background-color:var(--_bu-filled-bg);border-color:var(--_bu-filled-bc);color:var(--_bu-filled-fc)}.s-btn:not(.s-btn--radio:checked+label):not(.s-btn__link):not(.s-btn__unset):not(.s-btn__facebook):not(.s-btn__github):not(.s-btn__google):not(.is-selected):active{background-color:var(--_bu-bg-active);border-color:var(--_bu-bc-active);color:var(--_bu-fc-active)}.s-btn:not(.s-btn--radio:checked+label):not(.s-btn__link):not(.s-btn__unset):not(.s-btn__facebook):not(.s-btn__github):not(.s-btn__google):not(.is-selected):active.s-btn__filled{background-color:var(--_bu-filled-bg-active);border-color:var(--_bu-filled-bc-active);color:var(--_bu-filled-fc-active)}@media(max-width:640px){}@media(max-width:640px){}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}@media(forced-colors:active){}@media(prefers-color-scheme:dark){}.s-code-block{--_cb-line-numbers-bg:var(--black-150)}@media(prefers-color-scheme:dark){}pre.s-code-block>code{font-family:inherit}pre.s-code-block>code .hljs-built_in,pre.s-code-block>code .hljs-title{color:var(--highlight-literal)}pre.s-code-block>code .hljs-keyword,pre.s-code-block>code .hljs-meta,pre.s-code-block>code .hljs-section{color:var(--highlight-keyword)}pre.s-code-block>code .hljs-number,pre.s-code-block>code .hljs-type{color:var(--highlight-namespace)}pre.s-code-block>code .hljs-string,pre.s-code-block>code .hljs-symbol,pre.s-code-block>code .hljs-variable{color:var(--highlight-variable)}pre.s-code-block>code .hljs-attr{color:var(--highlight-attribute)}pre.s-code-block>code .hljs-comment{color:var(--highlight-comment)}pre.s-code-block{scrollbar-color:var(--scrollbar) transparent;background-color:var(--highlight-bg);border-radius:var(--br-md);color:var(--highlight-color);font-family:var(--ff-mono);font-size:var(--fs-body1);line-height:var(--lh-md);margin:0;overflow:auto;padding:var(--su12)}pre.s-code-block::-webkit-scrollbar{width:calc(var(--su-static12) - var(--su-static2));height:calc(var(--su-static12) - var(--su-static2));background-color:transparent}pre.s-code-block::-webkit-scrollbar-track{border-radius:calc(var(--su-static12) - var(--su-static2));background-color:transparent}pre.s-code-block::-webkit-scrollbar-thumb{border-radius:calc(var(--su-static12) - var(--su-static2));background-color:var(--scrollbar)}pre.s-code-block::-webkit-scrollbar-corner{background-color:transparent;border-color:transparent}@supports((-webkit-clip-path:polygon(0% 0%,100% 0%,100% 100%,0% 100%)) or (clip-path:polygon(0% 0%,100% 0%,100% 100%,0% 100%))){.s-expandable:not(.is-expanded) .s-expandable--content{--_ex-content-o:0;--_ex-content-transform:none}}@supports(-webkit-overflow-scrolling:touch){.s-input,.s-textarea{--_in-fs:var(--su-static16);--_in-px:.55em;--_in-py:.36em}.s-input::-webkit-input-placeholder,.s-textarea::-webkit-input-placeholder{line-height:normal !important}}@supports(-webkit-overflow-scrolling:touch){.s-input.s-input__md,.s-input.s-textarea__md,.s-textarea.s-input__md,.s-textarea.s-textarea__md{--_in-fs:calc(var(--su-static16) + var(--su-static1));--_in-py:.4em}}a,.s-link{--_li-fc:var(--theme-link-color,var(--theme-secondary-400));--_li-fc-hover:var(--theme-link-color-hover,var(--theme-secondary-500));--_li-fc-visited:var(--theme-link-color-visited,var(--theme-secondary-600));color:var(--_li-fc);cursor:pointer;text-decoration:none;user-select:auto}a.s-link__danger:visited,.s-link.s-link__danger:visited,a.s-link__grayscale:visited,.s-link.s-link__grayscale:visited,a.s-link__inherit:visited,.s-link.s-link__inherit:visited,a.s-link__muted:visited,.s-link.s-link__muted:visited,a.s-link__visited:visited,.s-link.s-link__visited:visited{color:var(--_li-fc-visited)}a.s-link__danger:visited:active,.s-link.s-link__danger:visited:active,a.s-link__grayscale:visited:active,.s-link.s-link__grayscale:visited:active,a.s-link__inherit:visited:active,.s-link.s-link__inherit:visited:active,a.s-link__muted:visited:active,.s-link.s-link__muted:visited:active,a.s-link__visited:visited:active,.s-link.s-link__visited:visited:active,a.s-link__danger:visited:hover,.s-link.s-link__danger:visited:hover,a.s-link__grayscale:visited:hover,.s-link.s-link__grayscale:visited:hover,a.s-link__inherit:visited:hover,.s-link.s-link__inherit:visited:hover,a.s-link__muted:visited:hover,.s-link.s-link__muted:visited:hover,a.s-link__visited:visited:hover,.s-link.s-link__visited:visited:hover{color:var(--_li-fc-hover)}.s-link.s-link__inherit{--_li-fc:inherit !important;--_li-fc-hover:inherit !important;--_li-fc-visited:inherit !important}a:active,.s-link:active,a:hover,.s-link:hover{color:var(--_li-fc-hover)}@media(max-width:640px){}@media(max-width:640px){}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}@media(prefers-reduced-motion){}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}@media(max-width:640px){}@media(max-width:640px){}@media(max-width:980px){}@media(max-width:816px){}@media(prefers-color-scheme:dark){}@media(max-width:980px){}@media(max-width:816px){}@media(prefers-color-scheme:dark){}.s-prose{--_pr-fs:calc(var(--su-static16) - var(--su-static1));--_pr-lh:1.5;--_pr-blockquote-ml:1em;--_pr-blockquote-mt:0;--_pr-blockquote-before-bg:var(--black-250);--_pr-code-fs:var(--fs-body1);--_pr-h1-fs:var(--fs-headline1);--_pr-h2-fs:var(--fs-title);--_pr-h3-fs:var(--fs-subheading);--_pr-h4-fs:var(--fs-body3);--_pr-h5-fs:var(--fs-body2);--_pr-h6-fs:var(--fs-body1);--_pr-hr-bg:var(--black-225);--_pr-img-mb:1.1em;--_pr-kbd-bc:var(--black-300);--_pr-kbd-bs:0 var(--su-static1) var(--su-static1) hsla(210,8%,5%,0.15),inset 0 1px 0 0 var(--_white-static);--_pr-spoiler-cursor:pointer;--_pr-spoiler-after-t:1em;--_pr-soiler-after-o:unset;--_pr-soiler-child-o:0;--_pr-soiler-child-visibility:hidden;--s-prose-spacing:1.1em;--s-prose-spacing-condensed:calc(1.1em/2);font-size:var(--_pr-fs);line-height:var(--_pr-lh);overflow-wrap:break-word}@media(prefers-color-scheme:dark){}@media(max-width:640px){html.html__responsive:not(.html__unpinned-leftnav) .s-prose{--_pr-spoiler-after-t:calc(var(--su8) + var(--su1))}}@media(max-width:640px){}.s-prose *:not(.s-code-block)>a code{color:var(--theme-link-color,var(--theme-secondary-400))}.s-prose *:not(.s-code-block)>code{padding:var(--su2) var(--su4);color:var(--black-600);background-color:var(--black-200);border-radius:var(--br-sm)}.s-prose blockquote:last-child,.s-prose dl:last-child,.s-prose h1:last-child,.s-prose h2:last-child,.s-prose h3:last-child,.s-prose h4:last-child,.s-prose h5:last-child,.s-prose h6:last-child,.s-prose hr:last-child,.s-prose img:last-child,.s-prose ol:last-child,.s-prose p:last-child,.s-prose pre:last-child,.s-prose table:last-child,.s-prose ul:last-child,.s-prose .s-link-preview:last-child,.s-prose .s-table-container:last-child,.s-prose blockquote:only-child,.s-prose dl:only-child,.s-prose h1:only-child,.s-prose h2:only-child,.s-prose h3:only-child,.s-prose h4:only-child,.s-prose h5:only-child,.s-prose h6:only-child,.s-prose hr:only-child,.s-prose img:only-child,.s-prose ol:only-child,.s-prose p:only-child,.s-prose pre:only-child,.s-prose table:only-child,.s-prose ul:only-child,.s-prose .s-link-preview:only-child,.s-prose .s-table-container:only-child{margin-bottom:0}.s-prose code{font-size:var(--_pr-code-fs);font-family:var(--ff-mono)}.s-prose p{--_pr-img-mb:0;margin-bottom:1.1em}.s-prose pre{margin-top:0;margin-bottom:calc(1.1em + .4em);overflow-wrap:normal}.s-prose pre:not(.s-code-block){scrollbar-color:var(--scrollbar) transparent;background-color:var(--highlight-bg);border-radius:var(--br-md);color:var(--highlight-color);font-size:var(--fs-body1);line-height:var(--lh-md);max-height:600px;overflow:auto;padding:var(--su12);width:auto}.s-prose pre:not(.s-code-block) code{background-color:transparent;border-radius:0;padding:0}.s-prose pre:not(.s-code-block)::-webkit-scrollbar{width:calc(var(--su-static12) - var(--su-static2));height:calc(var(--su-static12) - var(--su-static2));background-color:transparent}.s-prose pre:not(.s-code-block)::-webkit-scrollbar-track{border-radius:calc(var(--su-static12) - var(--su-static2));background-color:transparent}.s-prose pre:not(.s-code-block)::-webkit-scrollbar-thumb{border-radius:calc(var(--su-static12) - var(--su-static2));background-color:var(--scrollbar)}.s-prose pre:not(.s-code-block)::-webkit-scrollbar-corner{background-color:transparent;border-color:transparent}.s-select{--_se-arrow-bc:currentColor transparent;--_se-arrow-size:var(--su-static4);--_se-select-bc:var(--bc-darker);--_se-select-bg:var(--white);--_se-select-br:var(--br-md);--_se-select-fc:var(--black);--_se-select-px:.7em;--_se-select-py:.6em;--_se-select-fs:var(--fs-body1);color:var(--fc-dark);position:relative}@supports(-webkit-overflow-scrolling:touch){.s-select{--_se-select-fs:var(--su-static16);--_se-select-px:.55em;--_se-select-py:.4em}}select.s-select:-webkit-autofill,.s-select>select:-webkit-autofill{-webkit-box-shadow:0 0 0 1000px var(--theme-secondary-200) inset;-webkit-text-fill-color:var(--black);border-color:var(--blue-400);transition:background-color 0s 50000s}select.s-select:-webkit-autofill:focus,.s-select>select:-webkit-autofill:focus{border-color:var(--blue-400);-webkit-box-shadow:0 0 0 1000px var(--blue-200) inset,0 0 0 var(--su-static4) var(--focus-ring)}select.s-select::-webkit-contacts-auto-fill-button,.s-select>select::-webkit-contacts-auto-fill-button{background-color:var(--black)}.s-select:before,.s-select:after{border-color:var(--_se-arrow-bc);border-style:solid;border-width:var(--_se-arrow-size);content:"";pointer-events:none;position:absolute;right:calc(var(--su-static12) + var(--su-static1));z-index:var(--zi-selected)}.s-select:after{border-bottom-width:0;top:calc(50% + var(--su-static1))}.s-select:before{border-top-width:0;top:calc(50% - calc(var(--_se-arrow-size) + var(--su-static1)))}.s-select>select{background-color:var(--_se-select-bg);border:var(--su-static1) solid var(--_se-select-bc);border-radius:var(--_se-select-br);color:var(--_se-select-fc);font-size:var(--_se-select-fs);padding:var(--_se-select-py) var(--_se-select-px);appearance:none;font-family:inherit;height:100%;line-height:var(--lh-sm);outline:0;padding-right:var(--su32);position:relative;width:100%}.s-select>select:focus{box-shadow:0 0 0 var(--su-static2) var(--focus-neutral),0 0 0 var(--su-static4) var(--focus-theme);outline:var(--su-static2) solid transparent !important}.s-select>select:focus,.s-select>select.focus{color:var(--black)}@keyframes s-spinner-rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}.s-tag{--_ta-bc:var(--theme-tag-border-color,var(--_ta-bg));--_ta-bg:var(--theme-tag-background-color,var(--black-150));--_ta-fc:var(--theme-tag-color,var(--black-500));--_ta-bc-hover:var(--theme-tag-hover-border-color,var(--_ta-bg-hover));--_ta-bg-hover:var(--theme-tag-hover-background-color,var(--black-200));--_ta-fc-hover:var(--theme-tag-hover-color,var(--black-600));--_ta-br:var(--br-sm);--_ta-fs:var(--fs-caption);--_ta-lh:1.84615385;--_ta-pl:var(--_ta-px);--_ta-pr:var(--_ta-px);--_ta-px:var(--su4);--_ta-dismiss-padding:calc(var(--_ta-px) - var(--su-static1));background-color:var(--_ta-bg);border:var(--su-static1) solid var(--_ta-bc);border-radius:var(--_ta-br);color:var(--_ta-fc);font-size:var(--_ta-fs);line-height:var(--_ta-lh);padding-left:var(--_ta-pl);padding-right:var(--_ta-pr);align-items:center;display:inline-flex;font-weight:700;justify-content:center;min-width:0;text-decoration:none;vertical-align:middle;white-space:nowrap}a.s-tag:hover,a.s-tag:active{background-color:var(--_ta-bg-hover);border-color:var(--_ta-bc-hover);color:var(--_ta-fc-hover)}.s-tag:focus-visible{border-color:var(--focus-neutral) !important;box-shadow:0 0 0 var(--su-static1) var(--focus-neutral),0 0 0 calc(var(--su-static4) - var(--su-static1)) var(--focus-theme);outline:var(--su-static2) solid transparent !important}@media(prefers-reduced-motion){}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}@media(max-width:640px){}@media(max-width:640px){}@media(max-width:640px){}@media(max-width:640px){}@media(max-width:640px){}@media(max-width:640px){}@media(max-width:640px){}@media(max-width:640px){}@font-face{font-family:"Segoe UI Adjusted";src:local(Segoe UI);ascent-override:95%}@font-face{font-family:"Segoe UI Adjusted";src:local(Segoe UI Italic);ascent-override:95%;font-style:italic}@font-face{font-family:"Segoe UI Adjusted";src:local(Segoe UI Semibold);ascent-override:95%;font-weight:600}@font-face{font-family:"Segoe UI Adjusted";src:local(Segoe UI Semibold Italic);ascent-override:95%;font-style:italic;font-weight:600}@font-face{font-family:"Segoe UI Adjusted";src:local(Segoe UI Bold);ascent-override:90%;font-weight:700}@font-face{font-family:"Segoe UI Adjusted";src:local(Segoe UI Bold Italic);ascent-override:95%;font-style:italic;font-weight:700}html,body{--ff-sans:-apple-system,BlinkMacSystemFont,"Segoe UI Adjusted","Segoe UI","Liberation Sans",sans-serif;--ff-serif:Georgia,Cambria,"Times New Roman",Times,serif;--ff-mono:ui-monospace,"Cascadia Mono","Segoe UI Mono","Liberation Mono",Menlo,Monaco,Consolas,monospace;--theme-body-font-family:var(--ff-sans);--fs-fine:11px;--fs-caption:12px;--fs-body1:13px;--fs-body2:1.15384615rem;--fs-body3:1.30769231rem;--fs-subheading:1.46153846rem;--fs-title:1.61538462rem;--fs-headline1:2.07692308rem;--fs-headline2:2.61538461rem;--fs-display1:3.30769231rem;--fs-display2:4.23076923rem;--fs-display3:5.30769231rem;--fs-display4:7.61538461rem;--fs-body2-relative:1.15384615em;--fs-body3-relative:1.30769231em;--fs-subheading-relative:1.46153846em;--fs-title-relative:1.61538462em;--fs-headline1-relative:2.07692308em;--fs-headline2-relative:2.61538461em;--fs-display1-relative:3.30769231em;--fs-display2-relative:4.23076923em;--fs-display3-relative:5.30769231em;--fs-display4-relative:7.61538461em;--fs-base:13px;--stacks-internals-lh-unit:13;--lh-xs:1;--lh-sm:calc((var(--stacks-internals-lh-unit) + 2)/var(--stacks-internals-lh-unit));--lh-md:calc((var(--stacks-internals-lh-unit) + 4)/var(--stacks-internals-lh-unit));--lh-lg:calc((var(--stacks-internals-lh-unit) + 8)/var(--stacks-internals-lh-unit));--lh-xl:calc((var(--stacks-internals-lh-unit) + 12)/var(--stacks-internals-lh-unit));--lh-xxl:2;--lh-base:var(--lh-md);--lh-6:((var(--stacks-internals-lh-unit)+6)/var(--stacks-internals-lh-unit))}body{--zi-hide:-1;--zi-base:0;--zi-selected:25;--zi-active:30;--zi-dropdown:1000;--zi-popovers:2000;--zi-tooltips:3000;--zi-banners:4000;--zi-navigation:5000;--zi-navigation-fixed:5050;--zi-modals-background:8050;--zi-modals:9000;--br-sm:calc(var(--su-static4));--br-md:calc(var(--su-static6));--br-lg:calc(var(--su-static8));--br-circle:50%;--te-smooth-slow:cubic-bezier(.25,.46,.45,.94);--te-smooth:cubic-bezier(.165,.84,.44,1);--te-smooth-quick:cubic-bezier(.19,1,.22,1);--te-back-out:cubic-bezier(.175,.885,.32,1.275);--te-back-in-out:cubic-bezier(.68,-0.55,.265,1.55);--te-ease-in:cubic-bezier(.47,0,.745,.715);--te-ease-in-out:cubic-bezier(.445,.05,.55,.95);--te-ease-out:cubic-bezier(.39,.575,.565,1);--default-transition-duration:.1s;--transition-time:var(--default-transition-duration);--s-full:97.2307692rem;--s-step:calc(var(--s-full)/12)}body{--_o-disabled:.5;--_o-disabled-static:.5;--_black-static:hsl(0,0%,0%);--_white-static:hsl(0,0%,100%)}body:not(.theme-dark),body.theme-highcontrast:not(.theme-dark),body:not(.theme-highcontrast):not(.theme-dark),body.theme-dark .theme-light__forced,body.theme-highcontrast.theme-dark .theme-light__forced,body:not(.theme-highcontrast).theme-dark .theme-light__forced,body.theme-system .theme-light__forced,body.theme-highcontrast.theme-system .theme-light__forced,body:not(.theme-highcontrast).theme-system .theme-light__forced,body.theme-dark,body.theme-highcontrast.theme-dark,body:not(.theme-highcontrast).theme-dark,body:not(.theme-dark) .theme-dark__forced,body.theme-highcontrast:not(.theme-dark) .theme-dark__forced,body:not(.theme-highcontrast):not(.theme-dark) .theme-dark__forced{--bg-error:var(--red-400);--bg-danger:var(--red-400);--bg-success:var(--green-400);--bg-warning:var(--yellow-500);--bc-error:var(--red-400);--bc-danger:var(--red-400);--bc-success:var(--green-400);--bc-warning:var(--yellow-500);--fc-light:var(--black-400);--fc-medium:var(--black-500);--fc-dark:var(--black-600);--fc-error:var(--red-400);--fc-danger:var(--red-400);--fc-success:var(--green-400);--fc-warning:var(--yellow-500)}@media(prefers-color-scheme:dark){}body:not(.theme-highcontrast):not(.theme-dark),body:not(.theme-highcontrast).theme-dark .theme-light__forced,body:not(.theme-highcontrast).theme-system .theme-light__forced,body:not(.theme-highcontrast):not(.theme-dark).themed,body:not(.theme-highcontrast).theme-dark .theme-light__forced.themed,body:not(.theme-highcontrast).theme-system .theme-light__forced.themed,body:not(.theme-highcontrast):not(.theme-dark) .themed,body:not(.theme-highcontrast).theme-dark .theme-light__forced .themed,body:not(.theme-highcontrast).theme-system .theme-light__forced .themed{--white:hsl(0,0%,100%);--black-050:hsl(0,0%,100%);--black-100:hsl(210,8%,98%);--black-150:hsl(210,8%,95%);--black-200:hsl(210,8%,90%);--black-225:hsl(210,8%,85%);--black-250:hsl(210,8%,80%);--black-300:hsl(210,9%,75%);--black-350:hsl(210,8%,68%);--black-400:hsl(210,8%,42%);--black-500:hsl(210,8%,25%);--black-600:hsl(210,8%,5%);--black:hsl(0,0%,0%);--orange-100:hsl(23,87%,97%);--orange-200:hsl(27,87%,87%);--orange-300:hsl(27,87%,72%);--orange-400:hsl(27,89%,48%);--orange-500:hsl(27,87%,41%);--orange-600:hsl(27,87%,27%);--blue-100:hsl(210,80%,96%);--blue-200:hsl(210,80%,91%);--blue-300:hsl(210,78%,76%);--blue-400:hsl(210,77%,46%);--blue-500:hsl(210,77%,36%);--blue-600:hsl(210,80%,23%);--green-100:hsl(148,35%,95%);--green-200:hsl(148,35%,88%);--green-300:hsl(148,35%,69%);--green-400:hsl(148,70%,31%);--green-500:hsl(148,75%,22%);--green-600:hsl(148,75%,15%);--red-100:hsl(0,72%,96%);--red-200:hsl(0,70%,93%);--red-300:hsl(0,66%,80%);--red-400:hsl(0,60%,49%);--red-500:hsl(0,65%,37%);--red-600:hsl(0,65%,22%);--yellow-100:hsl(43,85%,95%);--yellow-200:hsl(43,85%,88%);--yellow-300:hsl(43,85%,72%);--yellow-400:hsl(43,85%,50%);--yellow-500:hsl(43,85%,33%);--yellow-600:hsl(43,85%,18%);--purple-100:hsl(237,83%,98%);--purple-200:hsl(237,78%,93%);--purple-300:hsl(237,60%,83%);--purple-400:hsl(237,55%,57%);--purple-500:hsl(237,50%,45%);--purple-600:hsl(237,50%,32%);--gold-100:hsl(46,100%,91%);--gold-200:hsl(46,100%,74%);--gold-300:hsl(45,100%,42%);--gold-400:hsl(46,92%,26%);--silver-100:hsl(0,0%,95%);--silver-200:hsl(0,0%,84%);--silver-300:hsl(210,5%,68%);--silver-400:hsl(210,2%,40%);--bronze-100:hsl(28,40%,92%);--bronze-200:hsl(30,47%,83%);--bronze-300:hsl(28,43%,65%);--bronze-400:hsl(28,43%,39%);--bc-lightest:var(--black-100);--bc-lighter:var(--black-150);--bc-light:var(--black-200);--bc-medium:var(--black-225);--bc-dark:var(--black-250);--bc-darker:var(--black-300);--bs-sm:0 1px 2px hsla(0,0%,0%,0.05),0 1px 4px hsla(0,0%,0%,0.05),0 2px 8px hsla(0,0%,0%,0.05);--bs-md:0 1px 3px hsla(0,0%,0%,0.06),0 2px 6px hsla(0,0%,0%,0.06),0 3px 8px hsla(0,0%,0%,0.09);--bs-lg:0 1px 4px hsla(0,0%,0%,0.09),0 3px 8px hsla(0,0%,0%,0.09),0 4px 13px hsla(0,0%,0%,0.13);--bs-xl:0 10px 24px hsla(0,0%,0%,0.05),0 20px 48px hsla(0,0%,0%,0.05),0 1px 4px hsla(0,0%,0%,0.1);--translucent-secondary:var(--theme-secondary-custom-translucent,hsla(206,100%,40%,0.15));--translucent-success:hsla(140,40%,75%,0.4);--translucent-warning:hsla(47,79%,58%,0.4);--translucent-error:hsla(358,62%,47%,0.15);--translucent-muted:hsla(210,8%,15%,0.1);--focus-neutral:var(--white);--focus-theme:var(--theme-secondary-400);--focus-ring:var(--theme-secondary-custom-focus-ring,hsla(206,100%,40%,0.15));--focus-ring-success:hsla(140,40%,75%,0.4);--focus-ring-warning:hsla(47,79%,58%,0.4);--focus-ring-error:hsla(358,62%,47%,0.15);--focus-ring-muted:hsla(210,8%,15%,0.1);--highlight-addition:var(--green-500);--highlight-attribute:hsl(206,98.5%,29%);--highlight-bg:hsl(0,0%,96.5%);--highlight-color:var(--black-600);--highlight-comment:hsl(210,8%,43.5%);--highlight-deletion:var(--red-500);--highlight-keyword:hsl(206,98.5%,29%);--highlight-literal:hsl(27,99%,36%);--highlight-namespace:hsl(27,99%,36%);--highlight-punctuation:var(--black-500);--highlight-symbol:hsl(306,43%,35%);--highlight-variable:hsl(80,80.5%,26.5%);--scrollbar:hsla(0,0%,0%,0.2);--theme-primary:var(--theme-primary-custom,var(--orange-400));--theme-primary-100:var(--theme-primary-custom-100,var(--orange-100));--theme-primary-200:var(--theme-primary-custom-200,var(--orange-200));--theme-primary-300:var(--theme-primary-custom-300,var(--orange-300));--theme-primary-400:var(--theme-primary-custom-400,var(--orange-400));--theme-primary-500:var(--theme-primary-custom-500,var(--orange-500));--theme-primary-600:var(--theme-primary-custom-600,var(--orange-600));--theme-secondary:var(--theme-secondary-custom,var(--blue-400));--theme-secondary-100:var(--theme-secondary-custom-100,var(--blue-100));--theme-secondary-200:var(--theme-secondary-custom-200,var(--blue-200));--theme-secondary-300:var(--theme-secondary-custom-300,var(--blue-300));--theme-secondary-400:var(--theme-secondary-custom-400,var(--blue-400));--theme-secondary-500:var(--theme-secondary-custom-500,var(--blue-500));--theme-secondary-600:var(--theme-secondary-custom-600,var(--blue-600));--theme-primary-custom-100:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),calc(var(--theme-base-primary-color-l) + ((100% - var(--theme-base-primary-color-l))*.9)));--theme-primary-custom-200:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),calc(var(--theme-base-primary-color-l) + ((100% - var(--theme-base-primary-color-l))*.75)));--theme-primary-custom-300:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),calc(var(--theme-base-primary-color-l) + ((100% - var(--theme-base-primary-color-l))*.5)));--theme-primary-custom-400:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),var(--theme-base-primary-color-l));--theme-primary-custom-500:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),calc(var(--theme-base-primary-color-l) + (var(--theme-base-primary-color-l)*-.3)));--theme-primary-custom-600:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),calc(var(--theme-base-primary-color-l) + (var(--theme-base-primary-color-l)*-.6)));--theme-primary-custom:var(--theme-primary-custom-400);--theme-secondary-custom-100:hsl(var(--theme-base-secondary-color-h),var(--theme-base-secondary-color-s),calc(var(--theme-base-secondary-color-l) + ((100% - var(--theme-base-secondary-color-l))*.9)));--theme-secondary-custom-200:hsl(var(--theme-base-secondary-color-h),var(--theme-base-secondary-color-s),calc(var(--theme-base-secondary-color-l) + ((100% - var(--theme-base-secondary-color-l))*.75)));--theme-secondary-custom-300:hsl(var(--theme-base-secondary-color-h),var(--theme-base-secondary-color-s),calc(var(--theme-base-secondary-color-l) + ((100% - var(--theme-base-secondary-color-l))*.5)));--theme-secondary-custom-400:hsl(var(--theme-base-secondary-color-h),var(--theme-base-secondary-color-s),var(--theme-base-secondary-color-l));--theme-secondary-custom-500:hsl(var(--theme-base-secondary-color-h),var(--theme-base-secondary-color-s),calc(var(--theme-base-secondary-color-l) + (var(--theme-base-secondary-color-l)*-.3)));--theme-secondary-custom-600:hsl(var(--theme-base-secondary-color-h),var(--theme-base-secondary-color-s),calc(var(--theme-base-secondary-color-l) + (var(--theme-base-secondary-color-l)*-.6)));--theme-secondary-custom:var(--theme-secondary-custom-400);--theme-secondary-custom-focus-ring:hsla(var(--theme-base-secondary-color-h),var(--theme-base-secondary-color-s),var(--theme-base-secondary-color-l),0.15);--theme-secondary-custom-translucent:hsla(var(--theme-base-secondary-color-h),var(--theme-base-secondary-color-s),var(--theme-base-secondary-color-l),0.15);color:var(--theme-body-font-color,var(--black-600))}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}.bt{border-top-style:solid !important;border-top-width:var(--su-static1) !important}.bb{border-bottom-style:solid !important;border-bottom-width:var(--su-static1) !important}.bar-sm{border-radius:var(--br-sm) !important}.bar-pill{border-radius:1000px !important}.fc-black-050,.h\:fc-black-050:hover,.f\:fc-black-050:focus,.f\:fc-black-050:focus-within{color:var(--black-050) !important}.bc-black-200{border-color:var(--black-200) !important}.bc-black-225{border-color:var(--black-225) !important}.fc-black-300{color:var(--black-300) !important}.fc-black-400{color:var(--black-400) !important}.fc-black-600{color:var(--black-600) !important}.fc-green-400{color:var(--green-400) !important}.bg-theme-primary-200,.h\:bg-theme-primary-200:hover,.f\:bg-theme-primary-200:focus,.f\:bg-theme-primary-200:focus-within{background-color:var(--theme-primary-200) !important}.fc-theme-primary-400{color:var(--theme-primary-400) !important}.bg-theme-secondary-400,.h\:bg-theme-secondary-400:hover,.f\:bg-theme-secondary-400:focus,.f\:bg-theme-secondary-400:focus-within{background-color:var(--theme-secondary-400) !important}.bc-theme-secondary-400,.h\:bc-theme-secondary-400:hover,.f\:bc-theme-secondary-400:focus,.f\:bc-theme-secondary-400:focus-within{border-color:var(--theme-secondary-400) !important}@media(prefers-color-scheme:dark){}.gs4{margin:calc(var(--su4)/2*-1)}.gs4>.d-flex,.gs4>.flex--item{margin:calc(var(--su4)/2)}.gs8{margin:calc(var(--su8)/2*-1)}.gs8>.flex--item{margin:calc(var(--su8)/2)}.gsx,.gsx>.d-flex,.gsx>[class*="flex--item"]{margin-top:0;margin-bottom:0}.gsy,.gsy>.d-flex,.gsy>[class*="flex--item"]{margin-right:0;margin-left:0}.fd-column{flex-direction:column !important}.fw-wrap{flex-wrap:wrap !important}.jc-center{justify-content:center !important}.jc-end{justify-content:flex-end !important}.ai-center{align-items:center !important}.ai-end{align-items:flex-end !important}.ai-start{align-items:flex-start !important}.fl-grow1{flex-grow:1 !important}.fl0{flex:0 auto !important}.fl1{flex:1 auto !important}.g4{--_gap-y:var(--su4);--_gap-x:var(--su4)}.g4{gap:var(--_gap-y,0) var(--_gap-x,0)}body{--su-base:1;--su-static0:0;--su-static1:1px;--su-static2:2px;--su-static4:4px;--su-static6:6px;--su-static8:8px;--su-static12:12px;--su-static16:16px;--su-static24:24px;--su-static32:32px;--su-static48:48px;--su-static64:64px;--su-static96:96px;--su-static128:128px;--su0:var(--su-static0);--su1:clamp(var(--su-static1),calc(var(--su-static1)*var(--su-base)),calc(var(--su-static1)*var(--su-base)));--su2:calc(var(--su-static2)*var(--su-base));--su4:calc(var(--su-static4)*var(--su-base));--su6:calc(var(--su-static6)*var(--su-base));--su8:calc(var(--su-static8)*var(--su-base));--su12:calc(var(--su-static12)*var(--su-base));--su16:calc(var(--su-static16)*var(--su-base));--su24:calc(var(--su-static24)*var(--su-base));--su32:calc(var(--su-static32)*var(--su-base));--su48:calc(var(--su-static48)*var(--su-base));--su64:calc(var(--su-static64)*var(--su-base));--su96:calc(var(--su-static96)*var(--su-base));--su128:calc(var(--su-static128)*var(--su-base))}.mt12{margin-top:var(--su12) !important}.mt16{margin-top:var(--su16) !important}.mt24{margin-top:var(--su24) !important}.mtn8{margin-top:calc(var(--su8)*-1) !important}.mr0{margin-right:var(--su0) !important}.mr2{margin-right:var(--su2) !important}.mr4{margin-right:var(--su4) !important}.mr16{margin-right:var(--su16) !important}.mb0{margin-bottom:var(--su0) !important}.mb8{margin-bottom:var(--su8) !important}.mb12{margin-bottom:var(--su12) !important}.mb16{margin-bottom:var(--su16) !important}.ml0{margin-left:var(--su0) !important}.ml12{margin-left:var(--su12) !important}.mln2{margin-left:calc(var(--su2)*-1) !important}.mx-auto{margin-left:auto !important;margin-right:auto !important}.pt2{padding-top:var(--su2) !important}.pt4{padding-top:var(--su4) !important}.pb8{padding-bottom:var(--su8) !important}.py4{padding-top:var(--su4) !important;padding-bottom:var(--su4) !important}.py6{padding-top:var(--su6) !important;padding-bottom:var(--su6) !important}h1,h2,h5{margin-top:0}.fs-headline1{font-size:var(--fs-headline1) !important}.fs-subheading{font-size:var(--fs-subheading) !important}.fs-caption{font-size:var(--fs-caption) !important}.fs-fine{font-size:var(--fs-fine) !important}@media(max-width:640px){html.html__responsive:not(.html__unpinned-leftnav) .fs-headline1{font-size:2rem !important}html.html__responsive:not(.html__unpinned-leftnav) .fs-subheading{font-size:1.6rem !important}}@media(max-width:640px){}.fw-bold{font-weight:700 !important}.ta-center{text-align:center !important}.td-underline{text-decoration:underline !important}.ws-nowrap{white-space:nowrap !important}.ow-break-word{overflow-wrap:break-word !important}.list-ls-none{list-style:none !important}.d-flex{display:flex !important}.d-inline-flex{display:inline-flex !important}.d-inline{display:inline !important}.d-none{display:none !important}@media(prefers-reduced-motion){}.c-pointer{cursor:pointer !important}.v-visible-sr{border:0;clip:rect(var(--su-static1),var(--su-static1),var(--su-static1),var(--su-static1));clip-path:inset(50%);height:var(--su-static1);margin:calc(var(--su-static1)*-1);overflow:hidden;padding:0;position:absolute;width:var(--su-static1);overflow-wrap:normal}.clearfix:before,.clearfix:after{content:"";display:table}.clearfix:after{clear:both}.ps-relative{position:relative !important}.w96{width:var(--su-static96) !important}@media(max-width:1264px){}@media(max-width:1100px){}@media(max-width:980px){html.html__responsive:not(.html__unpinned-leftnav) .md\:mt0{margin-top:var(--su0) !important}html.html__responsive:not(.html__unpinned-leftnav) .md\:mt24{margin-top:var(--su24) !important}html.html__responsive:not(.html__unpinned-leftnav) .md\:mb0{margin-bottom:var(--su0) !important}html.html__responsive:not(.html__unpinned-leftnav) .md\:mb8{margin-bottom:var(--su8) !important}}@media(max-width:816px){}@media(max-width:640px){html.html__responsive:not(.html__unpinned-leftnav) .sm\:fd-column{flex-direction:column !important}html.html__responsive:not(.html__unpinned-leftnav) .sm\:ai-start{align-items:flex-start !important}html.html__responsive:not(.html__unpinned-leftnav) .sm\:order-first{order:-1 !important}html.html__responsive:not(.html__unpinned-leftnav) .sm\:mb12{margin-bottom:var(--su12) !important}html.html__responsive:not(.html__unpinned-leftnav) .sm\:ml0{margin-left:var(--su0) !important}}@media(max-width:640px){}</style>
<style>body.unified-theme,body.unified-theme *{--theme-base-primary-color-h:27;--theme-base-primary-color-s:89%;--theme-base-primary-color-l:48%;--theme-primary-custom-100:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),calc(var(--theme-base-primary-color-l) + ((100% - var(--theme-base-primary-color-l))*.9)));--theme-primary-custom-200:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),calc(var(--theme-base-primary-color-l) + ((100% - var(--theme-base-primary-color-l))*.75)));--theme-primary-custom-300:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),calc(var(--theme-base-primary-color-l) + ((100% - var(--theme-base-primary-color-l))*.5)));--theme-primary-custom-400:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),var(--theme-base-primary-color-l));--theme-primary-custom-500:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),calc(var(--theme-base-primary-color-l) + (var(--theme-base-primary-color-l)*-.3)));--theme-primary-custom-600:hsl(var(--theme-base-primary-color-h),var(--theme-base-primary-color-s),calc(var(--theme-base-primary-color-l) + (var(--theme-base-primary-color-l)*-.6)));--theme-primary-custom:var(--theme-primary-custom-400);--theme-button-color:initial;--theme-button-hover-color:initial;--theme-button-hover-background-color:initial;--theme-button-active-background-color:initial;--theme-button-selected-color:initial;--theme-button-selected-background-color:initial;--theme-button-outlined-border-color:initial;--theme-button-outlined-selected-border-color:initial;--theme-button-primary-color:initial;--theme-button-primary-active-color:initial;--theme-button-primary-hover-color:initial;--theme-button-primary-selected-color:initial;--theme-button-primary-background-color:initial;--theme-button-primary-active-background-color:initial;--theme-button-primary-hover-background-color:initial;--theme-button-primary-selected-background-color:initial;--theme-background-color:var(--white);--theme-background-position:top left;--theme-background-repeat:repeat;--theme-background-size:auto;--theme-background-attachment:auto;--theme-content-background-color:var(--white);--theme-content-border-color:var(--black-225);--theme-header-background-color:var(--theme-primary);--theme-header-background-position:center left;--theme-header-background-repeat:repeat;--theme-header-background-size:auto;--theme-header-background-border-bottom:0;--theme-header-link-color:var(--theme-primary);--theme-header-sponsored-color:hsla(0,0%,100%,0.4);--theme-header-foreground-color:transparent;--theme-header-foreground-position:bottom right;--theme-header-foreground-repeat:no-repeat;--theme-header-foreground-size:auto;--theme-footer-background-color:hsl(210,8%,5%);--theme-footer-background-position:top left;--theme-footer-background-repeat:no-repeat;--theme-footer-background-size:auto;--theme-footer-background-border-top:0;--theme-footer-title-color:var(--black-250);--theme-footer-text-color:var(--black-300);--theme-footer-link-color:var(--black-300);--theme-footer-link-color-hover:var(--black-200);--theme-footer-divider-color:var(--black-500);--theme-footer-padding-top:0;--theme-footer-padding-bottom:0;--theme-link-color:initial;--theme-link-color-hover:initial;--theme-link-color-visited:initial;--theme-body-font-family:var(--ff-sans);--theme-body-font-color:var(--black-600);--theme-post-title-font-family:var(--ff-sans);--theme-post-title-color:var(--theme-link-color);--theme-post-title-color-hover:var(--theme-link-color-hover);--theme-post-title-color-visited:var(--theme-link-color-visited);--theme-post-body-font-family:var(--ff-sans);--theme-post-owner-background-color:var(--theme-secondary-100);--theme-post-owner-new-background-color:var(--theme-secondary-200);--theme-topbar-bottom-border:1px solid var(--black-225)}html,body{color:var(--theme-body-font-color,var(--black-600));font-family:var(--theme-body-font-family);font-size:var(--fs-base);line-height:var(--lh-base)}@media(max-width:640px){html.html__responsive:not(.html__unpinned-leftnav),html.html__responsive:not(.html__unpinned-leftnav) body{font-size:11px}}@media(max-width:640px){}body{box-sizing:border-box}body *,body *:before,body *:after{box-sizing:inherit}.svg-icon{vertical-align:bottom}.svg-icon:not(.native) *{fill:currentColor}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}.badgecount{color:var(--black-400)}.badge1,.badge2,.badge3{display:inline-block;line-height:inherit;vertical-align:text-bottom;height:14px}[class*="btn-"]{font-size:100%}ul,li{margin:0;padding:0}ul{margin-left:30px;margin-bottom:1em}ul{list-style-type:disc}.s-tag.post-tag{margin:var(--su2) var(--su2) var(--su2)0}a{color:var(--theme-link-color,var(--theme-secondary-400));text-decoration:none;cursor:pointer}a:hover,a:active{color:var(--theme-link-color-hover,var(--theme-secondary-500));text-decoration:none}a.comment-user{display:inline-block;white-space:nowrap;padding:0}a.comment-user.owner{padding:1px 5px}.s-prose a:not(.s-tag):not(.post-tag):not(.badge-tag):not(.s-link__visited):not(.s-btn):not(.s-editor-btn),.comment-copy a{text-decoration:underline}.s-prose a:not(.s-tag):not(.post-tag):not(.badge-tag):not(.s-link__visited):not(.s-btn):not(.s-editor-btn):visited,.comment-copy a:visited{color:var(--theme-link-color-visited,var(--theme-secondary-600))}.question-hyperlink:hover,.answer-hyperlink:hover,.question-hyperlink:active,.answer-hyperlink:active{color:var(--theme-post-title-color-hover,var(--theme-link-color-hover,var(--theme-secondary-500)))}.question-hyperlink:visited,.answer-hyperlink:visited{color:var(--theme-post-title-color-hover,var(--theme-link-color-visited,var(--theme-secondary-600)))}em{font-style:italic}@media(prefers-color-scheme:dark){}p{clear:both;margin-top:0}p code{padding:1px 5px}code{font-family:var(--ff-mono);background-color:var(--black-200)}pre{width:auto;max-height:600px}pre code{background-color:transparent}pre::-webkit-scrollbar{width:calc(var(--su-static12) - var(--su-static2));height:calc(var(--su-static12) - var(--su-static2));background-color:transparent}pre::-webkit-scrollbar-track{border-radius:calc(var(--su-static12) - var(--su-static2));background-color:transparent}pre::-webkit-scrollbar-thumb{border-radius:calc(var(--su-static12) - var(--su-static2));background-color:var(--scrollbar)}pre::-webkit-scrollbar-corner{background-color:transparent;border-color:transparent}h1,h2{line-height:1.3;margin:0 0 1em}h2{font-size:var(--fs-subheading)}.s-prose,.comment-copy{font-family:var(--theme-post-body-font-family,var(--theme-body-font-family))}@media(prefers-color-scheme:dark){}@media only screen and (min--moz-device-pixel-ratio:1.5),only screen and (-o-min-device-pixel-ratio:3/2),only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media only screen and (min--moz-device-pixel-ratio:1.5) and (prefers-color-scheme:dark),only screen and (-o-min-device-pixel-ratio:3/2) and (prefers-color-scheme:dark),only screen and (-webkit-min-device-pixel-ratio:1.5) and (prefers-color-scheme:dark),only screen and (min-device-pixel-ratio:1.5) and (prefers-color-scheme:dark){}@media only screen and (min--moz-device-pixel-ratio:1.5),only screen and (-o-min-device-pixel-ratio:3/2),only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}[class*="gravatar-wrapper-"]{padding:0;overflow:hidden}[class*="gravatar-wrapper-"] img{margin:0 auto}.gravatar-wrapper-32,.gravatar-wrapper-32 img{width:32px;height:32px}@keyframes spinnerRotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}.badge1,.badge2,.badge3{background-image:/* original URL: https://cdn.sstatic.net/Img/unified/sprites.svg?v=fcc0ea44ba27 */url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTg5IiBoZWlnaHQ9IjUzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNDggMjgwLjh2Ny42bDguNSA3LjZMNzMgMjgxLjJWMjczbC0xNi41IDE0LjktOC41LTcuMXpNMjIgMzI0djNsNCA0IDctNnYtNGwtNyA2IiBmaWxsPSIjNUVCQTdEIi8+PHBhdGggZD0iTTggMjgwLjh2Ny42bDguNiA3LjZMMzMgMjgxLjJWMjczbC0xNi40IDE0LjkiIGZpbGw9IiNDOUNCQ0YiLz48cGF0aCBkPSJNNDUgMTkxaDI5bC0xNC40LTE1IiBmaWxsPSIjRjQ4MDI0Ii8+PHBhdGggZD0iTTUgMTkxaDI5bC0xNC41LTE1IiBmaWxsPSIjQzlDQkNGIi8+PHBhdGggZD0iTTU5LjYgMjQzTDc0IDIyOEg0NWwxNC42IDE1ek02LjUgMzIyLjVMMCAzMjloMTMiIGZpbGw9IiNGNDgwMjQiLz48cGF0aCBkPSJNNy41IDM4Ni41TDAgMzgwdjEzbDcuNS02LjV6bTQ3LjUgODdsLTgtNi41djEzbDgtNi41em0tNDguNSAwTDE0IDQ4MHYtMTNsLTcuNSA2LjV6bTIwLTg0TDMzIDM4M0gyME02LjUgMzQxLjVMMCAzNDhoMTNNMTkuNSAyNDNMMzQgMjI4SDVNMTkuNSAxMjBsMi45IDkuMkgzMmwtNy43IDUuNiAzIDkuMi03LjgtNS43LTcuOCA1LjcgMy05LjItNy43LTUuNmg5LjYiIGZpbGw9IiNDOUNCQ0YiLz48cGF0aCBkPSJNNTkuNiAxMjBsMi45IDkuMmg5LjZsLTcuNyA1LjYgMyA5LjItNy44LTUuNy03LjggNS43IDMtOS4yLTcuNy01LjZoOS42IiBmaWxsPSIjRkZEODNEIi8+PHBhdGggZD0iTTU5LjYgMTIzLjNsMi4yIDYuOUg2OWwtNS44IDQuMiAyLjMgNi45LTUuOS00LjMtNS45IDQuMyAyLjMtNi45LTUuOC00LjJoNy4zbDIuMS02Ljl6bTAtMy4zbC0yLjkgOS4yaC05LjZsNy43IDUuNi0zIDkuMiA3LjgtNS43IDcuOCA1LjctMy05LjIgNy43LTUuNmgtOS42bC0yLjktOS4yeiIgZmlsbD0iI0VBQzMyOCIvPjxwYXRoIGQ9Ik02NSA0MDhhMyAzIDAgMTAwLTYgMyAzIDAgMDAwIDZ6IiBmaWxsPSIjRDFBNjg0Ii8+PHBhdGggZD0iTTg1IDQwOGEzIDMgMCAxMDAtNiAzIDMgMCAwMDAgNnoiIGZpbGw9IiNCNEI4QkMiLz48cGF0aCBkPSJNMTA1IDQwOGEzIDMgMCAxMDAtNiAzIDMgMCAwMDAgNnoiIGZpbGw9IiNGRkNDMDEiLz48cGF0aCBkPSJNNDcgMzY3aDJ2MmgtMnYtMnptMyAzaDJ2MmgtMnYtMnptNiAwaDJ2MmgtMnYtMnptNiAwaDJ2MmgtMnYtMnptNiAwaDJ2MmgtMnYtMnptLTE1LTNoMnYyaC0ydi0yem02IDBoMnYyaC0ydi0yem02IDBoMnYyaC0ydi0yem02IDBoMnYyaC0yIiBmaWxsPSIjOTM5OTlGIi8+PHBhdGggZD0iTTAgNDAwdjMxaDMxdi0zMSIgZmlsbD0iI0M5Q0JDRiIvPjxwYXRoIGQ9Ik0yMCA0MTlhMTQgMTQgMCAwMTggMTJIM2ExNC4xIDE0LjEgMCAwMTgtMTJ2LS41YTcuNSA3LjUgMCAxMTExLjYtOC40IDcuNSA3LjUgMCAwMS0yLjYgOC40di41eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik02MCAzNDBoMnYxNGgtMk02MyAzNDFoMTB2OEg2MyIgZmlsbD0iI0M5Q0JDRiIvPjxwYXRoIGQ9Ik02MCAzMjBoMnYxNGgtMiIgZmlsbD0iI0REM0M0QyIvPjxwYXRoIGQ9Ik02MyAzMjFoMTB2OEg2MyIgZmlsbD0iI0VFQzRDOCIvPjxwYXRoIGQ9Ik04MCAzMjBoMTR2MTRIODAiIGZpbGw9IiNGRTY1MDIiLz48cGF0aCBkPSJNODQgMzI5Yy0xLjQgMC0yIC42LTIgMiAwIC40LjYgMSAyIDEgLjQgMCAxLS42IDEtMSAwLTEuNC0uNi0yLTEtMnptLTItNHYyYTUuMSA1LjEgMCAwMTUgNWgyYTcgNyAwIDAwLTctN3ptMC0zdjJhNy45IDcuOSAwIDAxOCA4aDJhMTAgMTAgMCAwMC0xMC0xMHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMjIuNiAzNDcuMWwtLjcgMy4yIDMuMi0uNy0yLjUtMi41em0uOC0uN2wzLjYtMy42IDIuNSAyLjUtMy42IDMuNi0yLjUtMi41em01LjctNS4xYy0uNCAwLS44LjEtMS4xLjRsLS43LjcgMi41IDIuNS43LS43Yy4yLS4zLjQtLjcuNC0xLjEgMC0xLS44LTEuOC0xLjgtMS44eiIgZmlsbD0iIzZDNzM3QSIvPjxwYXRoIGQ9Ik0xMDcgNDU5YTcgNyAwIDEwMC0xNCA3IDcgMCAwMDAgMTR6IiBmaWxsPSIjQzkxRDJFIi8+PHBhdGggZD0iTTExMC4yIDQ1My43bC0xLjktMS45IDEuOS0xLjl2LS4zbC0uOS0uOGgtLjNsLTIgMi0xLjgtMmgtLjNsLS45Ljh2LjNsMS45IDEuOS0xLjkgMS45di4zbC45LjloLjNsMS45LTEuOSAxLjkgMS45aC4zbC45LS45IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTQ3IDM1NGE3IDcgMCAxMDAtMTQgNyA3IDAgMDAwIDE0eiIgZmlsbD0iI0M5MUQyRSIvPjxwYXRoIGQ9Ik01MC4yIDM0OC43bC0xLjktMS45IDEuOS0xLjl2LS4zbC0uOS0uOEg0OWwtMiAyLTEuOC0yaC0uM2wtLjkuOHYuM2wxLjkgMS45LTEuOSAxLjl2LjNsLjkuOWguM2wxLjktMS45IDEuOSAxLjloLjNsLjktLjkiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNNDcgMzMzYTcgNyAwIDEwMC0xNCA3IDcgMCAwMDAgMTR6IiBmaWxsPSIjQzlDQkNGIi8+PHBhdGggZD0iTTUwLjIgMzI3LjdsLTEuOS0xLjkgMS45LTEuOXYtLjNsLS45LS44SDQ5bC0yIDItMS44LTJoLS4zbC0uOS44di4zbDEuOSAxLjktMS45IDEuOXYuM2wuOS45aC4zbDEuOS0xLjkgMS45IDEuOWguM2wuOS0uOSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik00MiAzMWwtMi4yLS4yYy0xLjctLjEtMi4zLS44LTIuMy0yIDAtMS40IDEtMi4yIDMtMi4yIDEuMy0uMSAyLjYuMyAzLjYgMS4xbDEuMy0xLjNhNy41IDcuNSAwIDAwLTQuOC0xLjRjLTIuOSAwLTQuOSAxLjUtNC45IDMuOSAwIDIuMiAxLjQgMy40IDQgMy42bDIuMi4yYzEuNi4xIDIuMi44IDIuMiAyIDAgMS42LTEuNCAyLjQtMy42IDIuNC0xLjYuMS0zLjEtLjUtNC4yLTEuNkwzNSAzNi44YzEuNSAxLjQgMy41IDIgNS41IDEuOSAzLjIgMCA1LjUtMS41IDUuNS00LjEgMC0yLjYtMS42LTMuNC00LTMuNnptMTUuOC02LjFjLTIuMiAwLTMuNS40LTQuNyAxLjlsMS4zIDEuM2EzLjYgMy42IDAgMDEzLjQtMS41YzIuNSAwIDMuNCAxIDMuNCAyLjl2MS4zaC00Yy0zIDAtNC42IDEuNS00LjYgMy45IDAgMSAuMyAyIDEgMi43LjguOSAxLjkgMS4yIDMuOCAxLjIgMS40LjEgMi45LS40IDMuOS0xLjR2MS4zaDJ2LTkuMWMtLjEtMi45LTEuOS00LjUtNS41LTQuNXptMy40IDguOWMuMS44LS4xIDEuNy0uNyAyLjNhNCA0IDAgMDEtMyAuOWMtMi4xIDAtMy4xLS43LTMuMS0yLjMgMC0xLjYgMS0yLjQgMy0yLjRoMy44djEuNXptOS43LTcuMWMxLjIgMCAyLjQuNSAzLjEgMS41bDEuMy0xLjNhNS40IDUuNCAwIDAwLTQuNC0yYy0zLjQgMC01LjkgMi4zLTUuOSA2LjkgMCA0LjYgMi42IDYuOSA1LjkgNi45IDEuNy4xIDMuMy0uNyA0LjQtMkw3NCAzNS40Yy0uNyAxLTEuOSAxLjUtMy4xIDEuNS0xLjIuMS0yLjQtLjUtMy4xLTEuNS0uNy0xLjEtMS0yLjMtLjktMy42LS4xLTEuMy4yLTIuNS45LTMuNi43LTEgMS45LTEuNiAzLjEtMS41em0xNi44LTEuNmgtMi40TDc5LjIgMzFWMTkuMWgtMnYxOS40aDJ2LTQuOWwyLjQtMi40IDQuNSA3LjNoMi40bC01LjYtOC42IDQuOC00Ljh6bTkuMi0uMmMtMS42IDAtMy4yLjUtNC4zIDEuNy0xLjMgMS4zLTEuNiAzLTEuNiA1LjQgMCAyLjUuMyA0LjEgMS42IDUuNGE2LjEgNi4xIDAgMDA0LjMgMS43YzEuNi4xIDMuMi0uNSA0LjMtMS43IDEuMy0xLjMgMS42LTIuOSAxLjYtNS40IDAtMi41LS4zLTQtMS42LTUuNGE1LjQgNS40IDAgMDAtNC4zLTEuN3ptMS43IDEwLjVjLS45LjgtMi4zLjgtMy4yIDAtLjctLjctLjgtMi0uOC0zLjRzLjEtMi43LjgtMy40Yy45LS44IDIuMy0uOCAzLjIgMCAuNy43LjggMiAuOCAzLjQgMCAxLjUtLjEgMi43LS44IDMuNHpNMTEyLjIgMjVsLTIuOCA4LjYtMi44LTguNmgtMy43bDUuMiAxNGgyLjdsNS4xLTE0aC0zLjd6bTkuNiAwYy0zLjYgMC02LjEgMi41LTYuMSA3IDAgNS43IDMuMiA3LjIgNi41IDcuMiAyIC4xIDQtLjcgNS4zLTIuMmwtMi4xLTJjLS44LjgtMiAxLjMtMy4yIDEuMmEzIDMgMCAwMS0zLjEtMi43di0uNGg4Ljd2LTEuNmMuMS0zLjgtMi4xLTYuNi02LTYuNnptLTIuNyA1LjdsLjMtMS41Yy40LS45IDEuMy0xLjQgMi4zLTEuNCAxIDAgMS45LjUgMi4zIDEuNGwuMyAxLjVoLTUuMnptMTMuMy00LjN2LTEuM0gxMjl2MTRoMy41di04LjRjMC0xLjMuOC0yLjQgMi4xLTIuNmguMmMuNyAwIDEuNC4zIDEuOC44bDIuNi0yLjZBNC4xIDQuMSAwIDAwMTM2IDI1Yy0xLjMgMC0yLjYuNC0zLjUgMS40em03LjYtMi44VjM5aDMuNVYyOGgyLjZ2LTIuN2gtMi42di0xLjVjMC0uNi4zLTEuMiAxLTEuM2gxLjV2LTNoLTJhMy45IDMuOSAwIDAwLTQgMy44di4zem0yMC4zIDEuM2MtMS42IDAtMy4yLjUtNC4zIDEuNy0xLjMgMS4zLTEuNiAzLTEuNiA1LjQgMCAyLjUuMyA0LjEgMS42IDUuNGE2LjEgNi4xIDAgMDA0LjMgMS43YzEuNi4xIDMuMi0uNSA0LjMtMS43IDEuMy0xLjMgMS42LTIuOSAxLjYtNS40IDAtMi41LS4zLTQtMS42LTUuNGE1LjQgNS40IDAgMDAtNC4zLTEuN3ptMS43IDEwLjVjLS45LjgtMi4zLjgtMy4yIDAtLjctLjctLjgtMi0uOC0zLjRzLjEtMi43LjgtMy40Yy45LS44IDIuMy0uOCAzLjIgMCAuNy43LjggMiAuOCAzLjQgMCAxLjUtLjEgMi43LS44IDMuNHpNMTgyLjcgMjVsLTIuMyA4LjYtMi45LTguNkgxNzVsLTIuOCA4LjctMi4zLTguNmgtMy43bDQuMyAxNGgyLjlsMi45LTguOCAyLjkgOC44aDNsNC4zLTE0aC0zLjh6bS0zMS4yIDkuOFYxOS42SDE0OFYzNWEzLjggMy44IDAgMDAzLjYgNGgyLjV2LTNoLTEuM2MtLjYuMS0xLjEtLjItMS4zLS44di0uNHptLTk4LjgtOS40SDQ5VjIxaC0ydjEzLjljMCAyIDEuMSAzLjYgMy40IDMuNmgxLjR2LTEuN2gtMWMtMS4zIDAtMS44LS43LTEuOC0ydi03LjdoMS45bDEuOC0xLjd6IiBmaWxsPSIjMjIyNDI2Ii8+PHBhdGggZD0iTTI2IDQxdi05aDR2MTNIMFYzMmg0djloMjJ6IiBmaWxsPSIjQkNCQkJCIi8+PHBhdGggZD0iTTIzIDM0bC44LTMtMTYuMS0zLjNMNyAzMWwxNiAzek05LjIgMjMuMmwxNSA3IDEuNC0zLTE1LTctMS40IDN6bTQuMi03LjRMMjYgMjYuNGwyLjEtMi41LTEyLjctMTAuNi0yLjEgMi41ek0yMS41IDhsLTIuNyAyIDkuOSAxMy4zIDIuNy0yTDIxLjUgOHpNNyAzOGgxNnYtM0g3djN6IiBmaWxsPSIjRjQ4MDI0Ii8+PHBhdGggZD0iTTIxIDUyN3YtOGgzdjExSDB2LTExaDN2OGgxOHoiIGZpbGw9IiNCQ0JCQkIiLz48cGF0aCBkPSJNNS40IDUxOS4xbDEzLjYgMiAuMS0yLjRMNiA1MTZsLS41IDN6bTEuOC02LjhsMTIgNS42IDEuMS0yLjQtMTItNS42LTEuMSAyLjR6bTMuNC01LjlsMTAuMiA4LjUgMS43LTItMTAuMi04LjUtMS43IDJ6bTYuNS02LjJsLTIuMSAxLjYgNy45IDEwLjYgMi4xLTEuNi03LjktMTAuNnpNNSA1MjVoMTR2LTNINXYzeiIgZmlsbD0iI0Y0ODAyNCIvPjxwYXRoIGQ9Ik0zNCA1MTguOWwtMS43LS4yYy0xLjMgMC0xLjgtLjYtMS44LTEuNSAwLTEgLjctMS44IDIuMy0xLjggMSAwIDIgLjMgMi42LjhsMS0xYy0xLS43LTIuMi0xLTMuNi0xLTIuMiAwLTMuOCAxLjEtMy44IDMgMCAxLjcgMSAyLjYgMyAyLjhsMS44LjFjMS4yLjEgMS43LjYgMS43IDEuNiAwIDEuMi0xIDEuOC0yLjYgMS44LTEuMyAwLTIuNC0uMy0zLjItMS4xbC0xIDFjMS4yIDEgMi41IDEuMyA0LjIgMS4zIDIuNSAwIDQuMi0xLjEgNC4yLTMtLjItMi0xLjUtMi42LTMuMi0yLjh6bTEyLjctNC42Yy0xLjcgMC0yLjcuMy0zLjYgMS40bDEgMWMuNi0uOSAxLjItMS4yIDIuNi0xLjIgMS44IDAgMi42LjggMi42IDIuMnYxaC0zLjFjLTIuMyAwLTMuNiAxLjItMy42IDMgMCAuNy4zIDEuNS44IDIgLjcuOCAxLjQgMSAyLjkgMWE0IDQgMCAwMDMtMXYxaDEuNXYtN2MtLjEtMi4zLTEuNC0zLjQtNC4xLTMuNHptMi42IDYuN2MwIC45LS4yIDEuNC0uNSAxLjctLjcuNi0xLjUuNy0yLjMuNy0xLjcgMC0yLjMtLjYtMi4zLTEuNyAwLTEuMi43LTEuOCAyLjMtMS44aDIuOWwtLjEgMS4xem03LjItNS40YzEgMCAxLjYuMyAyLjQgMS4ybDEtMWMtMS4xLTEuMS0yLTEuNS0zLjQtMS41LTIuNiAwLTQuNiAxLjctNC42IDUuMyAwIDMuNCAyIDUuMiA0LjYgNS4yIDEuNCAwIDIuMy0uMyAzLjMtMS41bC0xLTFjLS44IDEtMS40IDEuMi0yLjMgMS4yYTMgMyAwIDAxLTIuNC0xLjFjLS41LS43LS43LTEuNS0uNy0yLjggMC0xLjMuMi0yLjEuNy0yLjguNi0uOCAxLjUtMS4yIDIuNC0xLjJ6bTEyLjktMS4yaC0xLjhsLTQuNiA0LjV2LTkuMWgtMS42djE0LjhINjN2LTMuOGwxLjgtMS44IDMuNSA1LjZINzBsLTQuMi02LjcgMy41LTMuNXptNy0uM2MtMS41IDAtMi42LjYtMy4zIDEuMy0xIDEtMS4yIDIuMy0xLjIgNC4yIDAgMS45LjMgMy4xIDEuMiA0IC43LjggMS44IDEuNCAzLjMgMS40IDEuNSAwIDIuNy0uNSAzLjMtMS4zIDEtMSAxLjItMi4yIDEuMi00LjEgMC0yLS4zLTMuMi0xLjItNC4yLS42LS43LTEuNy0xLjMtMy4zLTEuM3ptMS4zIDhjLS4zLjMtLjcuNC0xLjMuNC0uNiAwLTEtLjEtMS4yLS40LS42LS42LS42LTEuNi0uNi0yLjYgMC0xLjIgMC0yIC42LTIuNi4yLS4zLjYtLjUgMS4yLS41czEgLjIgMS4zLjVjLjUuNi41IDEuNC41IDIuNi4xIDEuMSAwIDItLjUgMi42em0xMC4zLTcuOWwtMi4xIDYuNi0yLjItNi42aC0yLjhsNCAxMC42aDJsNC0xMC42SDg4em03LjMtLjFjLTIuOCAwLTQuNiAyLTQuNiA1LjUgMCA0LjMgMi40IDUuNCA0LjkgNS40IDIgMCAzLS41IDQtMS42TDk4IDUyMmEzIDMgMCAwMS0yLjQgMWMtMS41IDAtMi4zLTEtMi4zLTIuNWg2LjZ2LTEuMWMwLTMtMS42LTUuMi00LjYtNS4yem0tMiA0LjRjMC0uNSAwLS44LjMtMS4xLjMtLjcuOC0xLjIgMS44LTEuMmEyIDIgMCAwMTEuOCAxLjJjLjIuMy4yLjYuMyAxLjFoLTQuMnptMTAuNS0zLjJ2LTEuMWgtMi41djEwLjZoMi42di02LjRjMC0xLjMuOS0xLjkgMS44LTEuOS42IDAgMSAuMiAxLjQuN2wyLTJjLS44LS44LTEuNC0xLTIuNS0xLTEuMi0uMS0yLjIuNC0yLjggMXptNS40LTIuM3YxMS44aDIuN3YtOC40aDJ2LTJoLTJ2LTEuMmMwLS41LjMtMSAxLTFoMXYtMi4xaC0xLjVjLTIuMiAwLTMuMiAxLjUtMy4yIDN6bTE2LjIgMS4xYy0xLjUgMC0yLjYuNi0zLjIgMS4zLTEgMS0xLjMgMi4zLTEuMyA0LjIgMCAxLjkuMyAzLjEgMS4zIDQgLjYuOCAxLjcgMS40IDMuMiAxLjQgMS42IDAgMi43LS41IDMuMy0xLjMgMS0xIDEuMi0yLjIgMS4yLTQuMSAwLTItLjMtMy4yLTEuMi00LjItLjYtLjctMS43LTEuMy0zLjMtMS4zem0xLjMgOGMtLjMuMy0uNy40LTEuMy40LS42IDAtMS0uMS0xLjItLjQtLjYtLjYtLjYtMS42LS42LTIuNiAwLTEuMi4xLTIgLjYtMi42LjMtLjMuNi0uNSAxLjItLjVzMSAuMiAxLjMuNWMuNS42LjUgMS40LjUgMi42IDAgMS4xIDAgMi0uNSAyLjZ6bTE1LjgtNy45bC0xLjcgNi42LTIuMi02LjZoLTJsLTIuMiA2LjYtMS43LTYuNkgxMzBsMy4zIDEwLjZoMi4ybDIuMi02LjcgMi4yIDYuN2gyLjJsMy4zLTEwLjZoLTIuOHptLTI0LjYgNy40VjUxMGgtMi43djExLjhjMCAxLjUgMSAzIDMuMSAzaDEuNnYtMi4yaC0xYy0uNyAwLTEtLjMtMS0xek00MSA1MTZsMS40LTEuM2gtM3YtMy40SDM4VjUyMmMwIDEuNS45IDIuNyAyLjYgMi43aDF2LTEuMmgtLjdjLTEgMC0xLjQtLjYtMS40LTEuNVY1MTZINDF6IiBmaWxsPSIjMjIyNDI2Ii8+PC9zdmc+),none;background-size:initial;background-repeat:no-repeat;overflow:hidden}@media(prefers-color-scheme:dark){}@keyframes blink{50%{background-color:transparent}}.post-layout{display:grid;grid-template-columns:-webkit-max-content 1fr;grid-template-columns:max-content 1fr}.post-layout--left{grid-column:1}.post-layout--left.votecell{width:auto;padding-right:var(--su16)}.post-layout--right{padding-right:var(--su16);grid-column:2;width:auto;min-width:0}.post-layout--right .s-prose,.post-layout--right .comments{width:100%}@media(prefers-color-scheme:dark){}@media(hover:none),(pointer:coarse){}@media(forced-colors:active){}@media screen and (max-width:1111px) and (min-width:980.1px){}@media screen and (max-width:947px) and (min-width:816.1px){}@media screen and (max-width:771px) and (min-width:640.1px){}@media screen and (max-width:607px) and (min-width:640.1px){}@media screen and (max-width:607px){}html{--top-bar-allocated-space:56px}@media screen and (max-width:640px){}@media(prefers-color-scheme:dark){}@media screen and (max-width:640px){}@media screen and (max-width:640px){}@media screen and (max-width:640px){}body{--hack-topbar-scrollbar-fallback:var(--scrollbar)}.site-footer,.site-footer *,.site-footer *:before,.site-footer *:after{box-sizing:border-box}.site-footer .-list{margin:0;list-style:none}@media screen and (max-width:980px){html.html__responsive:not(.html__unpinned-leftnav) .site-footer .-list:not(.-social){display:flex;flex-wrap:wrap;column-gap:var(--su12);row-gap:var(--su8)}}@media screen and (max-width:816px){}.site-footer .-link{color:var(--theme-footer-link-color);padding:var(--su4)0;line-height:var(--lh-md);display:inline-block;text-decoration:none}.site-footer .-link:hover{color:var(--theme-footer-link-color-hover)}@media screen and (max-width:980px){html.html__responsive:not(.html__unpinned-leftnav) .site-footer .-link{padding:0}}@media screen and (max-width:816px){}.site-footer .-title{text-transform:uppercase;font-weight:bold;margin-bottom:var(--su12);color:var(--theme-footer-title-color);line-height:var(--lh-md)}.site-footer .-title a{color:var(--theme-footer-title-color);text-decoration:none}@media screen and (max-width:980px){html.html__responsive:not(.html__unpinned-leftnav) .site-footer .-title{margin-bottom:var(--su8)}}@media screen and (max-width:816px){}.site-footer{background-color:var(--theme-footer-background-color);background-image:none;background-position:var(--theme-footer-background-position);background-repeat:var(--theme-footer-background-repeat);border-top:var(--theme-footer-background-border-top);background-size:var(--theme-footer-background-size);color:var(--theme-footer-text-color) !important;padding-top:var(--theme-footer-padding-top);padding-bottom:var(--theme-footer-padding-bottom)}.site-footer .site-footer--container{max-width:1264px;width:100%;margin:0 auto;padding:var(--su32) var(--su12) var(--su12) var(--su12);display:flex;flex-flow:row wrap}@media screen and (max-width:980px) and (min-width:640.1px){html.html__responsive:not(.html__unpinned-leftnav) .site-footer .site-footer--container,html.html__responsive:not(.html__unpinned-leftnav) .site-footer .site-footer--extra{padding:var(--su24)}}@media screen and (max-width:816px) and (min-width:640.1px){}@media screen and (max-width:640px){html.html__responsive .site-footer .site-footer--container{padding:var(--su16)}}.site-footer .site-footer--logo{flex:0 0 64px;margin:calc(var(--su12)*-1)0 var(--su32)0}@media screen and (max-width:640px){html.html__responsive .site-footer .site-footer--logo{display:none}}.site-footer .site-footer--nav{display:flex;flex:2 1 auto;flex-wrap:wrap}@media screen and (max-width:980px){html.html__responsive:not(.html__unpinned-leftnav) .site-footer .site-footer--nav{flex-direction:column}}@media screen and (max-width:816px){}.site-footer .site-footer--col{padding:0 var(--su12) var(--su24)0;flex:1 0 auto}.site-footer .site-footer--copyright{flex:1 1 150px;display:flex;flex-direction:column}.site-footer .site-footer--copyright ul{display:flex;list-style:none;margin:0;padding:0}.site-footer .site-footer--copyright ul li+li{margin-left:var(--su12)}.site-footer .site-footer--copyright p{margin-top:auto;margin-bottom:var(--su24)}.site-footer .site-footer--copyright p a,.site-footer .site-footer--copyright p a:visited{line-height:inherit;color:var(--theme-footer-link-color);padding:0}.comments{padding-bottom:10px}a.comments-link:hover{padding:0 3px 2px 3px;text-decoration:none}.comment:not([style*="background-color"]){transition:background-color linear 3s}.comment-actions{padding-left:3px}.comment-score span{font-size:var(--fs-body1);font-weight:normal}.comment-text{vertical-align:text-top}.comment-text code{padding:1px 5px}@media(hover:none){}ul.comments-list{list-style-type:none;margin:0}ul.comments-list .comment{display:flex}ul.comments-list .comment-score{width:2ch;padding-right:4px}ul.comments-list .comment-score>span{float:right;padding-right:0px;min-width:2ch}ul.comments-list .comment-text{flex-grow:1}ul.comments-list .comment>*{border-bottom:1px solid var(--black-150)}ul.comments-list .comment-text,ul.comments-list .comment-actions{padding:6px 0}ul.comments-list .comment-text{min-width:0;flex-basis:0;padding-left:6px;padding-right:6px}ul.comments-list .comment-body{word-wrap:break-word}ul.comments-list .comment-actions{padding-right:2px}ul.comments-list .comment-text,ul.comments-list .comment-actions{transition:background-color ease-out 3s}ul.comments-list .comment-actions{width:38px;flex-shrink:0}ul.comments-list .comment-score{display:inline-block}@supports(display:grid){ul.comments-list .comment-actions{display:grid;grid-template-columns:repeat(2,max-content);align-content:flex-start;width:37px;width:calc(2ch + 16px + 4px + 2px)}ul.comments-list .comment-flagging:nth-child(3){grid-column:2}}@supports(display:grid) and (display:contents) and (not (-apple-trailing-word:auto)){body:not(.no-grid-comments) ul.comments-list{display:grid;grid-template-columns:max-content 1fr}body:not(.no-grid-comments) ul.comments-list .comment-score{width:auto;min-width:var(--su-static16)}body:not(.no-grid-comments) ul.comments-list .comment-score>span{min-width:0;float:none}body:not(.no-grid-comments) ul.comments-list .comment-actions{width:auto}body:not(.no-grid-comments) ul.comments-list .comment{display:contents}body:not(.no-grid-comments) ul.comments-list .comment__highlight .comment-actions{transition:none;background-color:var(--yellow-200)}}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}html{height:100%}body{min-height:100%;display:flex;flex-direction:column;background-color:var(--theme-background-color);background-image:none;background-position:var(--theme-background-position);background-repeat:var(--theme-background-repeat);background-size:var(--theme-background-size);background-attachment:var(--theme-background-attachment);--mp-alt-row-color:var(--black-150);--mp-critical-color:var(--red-500);--mp-duration-color:var(--black-600);--mp-gap-bg-color:var(--black-100);--mp-gap-font-color:var(--black-500);--mp-highlight-default-color:var(--fc-black-600);--mp-highlight-fade-color:var(--yellow-400);--mp-highlight-keyword-color:var(--blue-500);--mp-highlight-literal-color:var(--green-400);--mp-label-color:var(--black-500);--mp-link-color:var(--blue-500);--mp-main-bg-color:var(--white);--mp-muted-color:var(--black-350);--mp-popup-shadow:var(--bs-sm);--mp-query-border-color:var(--black-225);--mp-result-border:solid .5px var(--black-350);--mp-warning-color:var(--red-500)}.container{position:relative;flex:1 0 auto;text-align:left}#content{margin:0 auto}#content:before,#content:after{content:"";display:table}#content:after{clear:both}@media screen and (max-width:980px){}@media screen and (max-width:816px){}@media screen and (max-width:980px){}@media screen and (max-width:816px){}#answers{clear:both}#question-header .question-hyperlink{font-size:var(--fs-headline1);font-family:var(--theme-post-title-font-family,var(--theme-body-font-family));line-height:1.35;font-weight:normal;margin-bottom:0}#answers{padding-top:10px}#answers-header{margin-top:10px}.question{clear:both}.question .postcell{vertical-align:top}.question-page #answers .answer{border-bottom:1px solid var(--black-200)}.votecell{vertical-align:top}.answer{padding-bottom:var(--su16);padding-top:var(--su16)}.post-signature{text-align:left;vertical-align:top;width:200px}.owner{border-radius:var(--br-sm);background-color:var(--theme-post-owner-background-color)}.reputation-score{font-weight:bold;font-size:var(--fs-caption);margin-right:2px}.relativetime{text-decoration:none}#notify-container{font-size:var(--fs-body3);text-align:center;position:fixed;left:0;top:0;width:100%;height:0;z-index:calc(var(--zi-navigation-fixed) + 1)}.post-taglist{margin-bottom:10px;clear:both}.user-info{box-sizing:border-box;padding:5px 6px 7px 7px;color:var(--black-400)}.user-info:before,.user-info:after{content:"";display:table}.user-info:after{clear:both}.user-info .user-gravatar32{float:left;width:32px;height:32px;border-radius:1px}.user-info .user-gravatar32 img{border-radius:1px}.user-info .user-gravatar32~.user-details{margin-left:8px;width:calc(100% - 40px)}.user-info .user-action-time{margin-top:1px;margin-bottom:4px;font-size:var(--fs-caption)}.user-info .user-details{float:left}.user-info .-flair{display:block}.user-details{line-height:17px;word-wrap:break-word}.user-details .badgecount{font-weight:400;font-size:var(--fs-caption)}#mainbar h2{font-weight:400}@media screen and (max-width:980px){}@media screen and (max-width:816px){}#mainbar{float:left;margin:0;padding:0}.cool{color:var(--black-400)}@media screen{}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}.everyoneloves__bot-mid-leaderboard{width:728px}.bottom-notice{margin-top:15px;padding-top:10px;padding:0 10px 0 0;line-height:1.4;font-size:var(--fs-body3)}@media screen and (max-width:398px){}@media(prefers-color-scheme:dark){}code{white-space:pre-wrap}pre code{white-space:inherit;padding:0}.disabled-link{color:hsl(210,8%,42%);opacity:.6;padding:0 3px 2px}@keyframes highlighted-post-fade{0%{background-color:var(--yellow-200)}100%{background-color:rgba(0,0,0,0)}}.comment-date,.comment-date>a,.comment-date>a:hover{border-bottom:0;color:var(--black-350)}@media screen and (max-width:980px){}@media screen and (max-width:816px){}.comments{-webkit-tap-highlight-color:hsla(0,0%,100%,0)}@keyframes blinking{from{background:#f4a83d}to{background:rgba(244,168,61,0)}}.post-tag:not(.s-tag){--_ta-bc:var(--theme-tag-border-color,var(--_ta-bg));--_ta-bg:var(--theme-tag-background-color,var(--black-150));--_ta-fc:var(--theme-tag-color,var(--black-500));--_ta-bc-hover:var(--theme-tag-hover-border-color,var(--_ta-bg-hover));--_ta-bg-hover:var(--theme-tag-hover-background-color,var(--black-200));--_ta-fc-hover:var(--theme-tag-hover-color,var(--black-600));--_ta-br:var(--br-sm);--_ta-fs:var(--fs-caption);--_ta-lh:1.84615385;--_ta-pl:var(--_ta-px);--_ta-pr:var(--_ta-px);--_ta-px:var(--su4);--_ta-dismiss-padding:calc(var(--_ta-px) - var(--su-static1));background-color:var(--_ta-bg);border:var(--su-static1) solid var(--_ta-bc);border-radius:var(--_ta-br);color:var(--_ta-fc);font-size:var(--_ta-fs);line-height:var(--_ta-lh);padding-left:var(--_ta-pl);padding-right:var(--_ta-pr);align-items:center;display:inline-flex;font-weight:700;justify-content:center;min-width:0;text-decoration:none;vertical-align:middle;white-space:nowrap}a.post-tag:not(.s-tag):hover,a.post-tag:not(.s-tag):active{background-color:var(--_ta-bg-hover);border-color:var(--_ta-bc-hover);color:var(--_ta-fc-hover)}.post-tag:not(.s-tag):focus-visible{border-color:var(--focus-neutral) !important;box-shadow:0 0 0 var(--su-static1) var(--focus-neutral),0 0 0 calc(var(--su-static4) - var(--su-static1)) var(--focus-theme);outline:var(--su-static2) solid transparent !important}.-flair>span:not(.reputation-score){margin-right:3px;margin-left:2px}.badge1,.badge2,.badge3{margin-right:3px;margin-left:2px;width:6px}.badge1{background-position:-102px -398px}.badge2{background-position:-82px -398px}.badge3{background-position:-62px -398px}.badgecount{padding-left:0}#question-header{display:flex;flex-flow:row nowrap;justify-content:space-between}#question-header .question-hyperlink{color:var(--black-500)}.comment-text{font-size:var(--fs-body1);line-height:1.4}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}html.html__responsive,html.html__responsive body{min-width:auto}body{padding-top:56px}body .s-topbar~.container{margin-top:0}body>.container{max-width:1264px;width:100%;background:0;display:flex;justify-content:space-between;margin:0 auto}body>.container:after,body>.container:before{display:none}#content{max-width:1100px;width:calc(100% - 164px);background-color:var(--theme-content-background-color);border-radius:0;border:1px solid var(--theme-content-border-color);border-top-width:0;border-bottom-width:0;border-left-width:1px;border-right-width:0;padding:var(--su24);box-sizing:border-box}@media screen and (max-width:640px){html.html__responsive #content{border-left:0;border-right:0}}@media screen and (max-width:980px){html.html__responsive:not(.html__unpinned-leftnav) #content{padding-left:var(--su16);padding-right:var(--su16)}}@media screen and (max-width:816px){}@media screen and (max-width:640px){html.html__responsive #content{padding-left:var(--su12);padding-right:var(--su12);width:100%}}@media screen and (max-width:980px){}@media screen and (max-width:816px){}#mainbar{width:calc(100% - 300px - var(--su-static24))}@media screen and (max-width:980px){html.html__responsive:not(.html__unpinned-leftnav) #mainbar,html.html__responsive:not(.html__unpinned-leftnav) .mainbar{width:100%;float:none}}@media screen and (max-width:816px){}#answers{width:auto;float:none}.answer,#answers-header{width:100%}@media screen and (max-width:640px){}.left-sidebar{width:164px;flex-shrink:0;z-index:var(--zi-dropdown);box-shadow:0 0 0 hsla(0,0%,0%,0.05);transition:box-shadow ease-in-out .1s,transform ease-in-out .1s;transform:translateZ(0)}.left-sidebar,.left-sidebar *,.left-sidebar *:after,.left-sidebar *:before{box-sizing:border-box}.left-sidebar--sticky-container{position:fixed;width:164px;padding-top:var(--su24)}@supports(position:sticky) or (position:-webkit-sticky){.left-sidebar--sticky-container:not(.left-sidebar__fake-sticky){position:-webkit-sticky;position:sticky;width:auto;top:0;margin-bottom:var(--su8);max-height:100vh;overflow-y:auto;scrollbar-color:var(--scrollbar) transparent;top:var(--top-bar-allocated-space);max-height:calc(100vh - var(--top-bar-allocated-space))}.left-sidebar--sticky-container:not(.left-sidebar__fake-sticky)::-webkit-scrollbar{width:calc(var(--su-static12) - var(--su-static2));height:calc(var(--su-static12) - var(--su-static2));background-color:transparent}.left-sidebar--sticky-container:not(.left-sidebar__fake-sticky)::-webkit-scrollbar-track{border-radius:calc(var(--su-static12) - var(--su-static2));background-color:transparent}.left-sidebar--sticky-container:not(.left-sidebar__fake-sticky)::-webkit-scrollbar-thumb{border-radius:calc(var(--su-static12) - var(--su-static2));background-color:var(--scrollbar)}.left-sidebar--sticky-container:not(.left-sidebar__fake-sticky)::-webkit-scrollbar-corner{background-color:transparent;border-color:transparent}html.html__unpinned-leftnav .left-sidebar--sticky-container:not(.left-sidebar__fake-sticky){max-height:calc(100vh - 56px)}}@media screen and (max-width:640px){}@media screen and (max-width:980px){}@media screen and (max-width:816px){}@media screen and (max-width:640px){}@media screen and (max-width:980px){}@media screen and (max-width:816px){}.fc-theme-body-font{color:var(--theme-body-font-color,var(--black-600)) !important}@media screen and (max-width:640px){html.html__responsive *[data-is-here-when]:not([data-is-here-when~="sm"]){display:none}}@media screen and (max-width:980px) and (min-width:640.1px){html.html__responsive:not(.html__unpinned-leftnav) *[data-is-here-when]:not([data-is-here-when~="md"]){display:none}}@media screen and (max-width:816px) and (min-width:640.1px){}@media screen and (min-width:980.1px){html.html__responsive:not(.html__unpinned-leftnav) *[data-is-here-when]:not([data-is-here-when~="lg"]){display:none}}@media screen and (min-width:816.1px){}@media screen and (max-width:640px){}html.html__responsive .everyoneloves__bot-mid-leaderboard{margin-left:0}@media screen and (max-width:980px){}@media screen and (max-width:816px){}@media screen and (max-width:1280px){html.html__responsive:not(.html__unpinned-leftnav) .zone-container-main,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__top-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__mid-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__mid-second-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__bot-mid-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__tag-sponsorship{display:none}}@media screen and (max-width:1116px){}@media screen and (max-width:980px){html.html__responsive:not(.html__unpinned-leftnav) .zone-container-main,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__top-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__mid-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__sec-mid-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__bot-mid-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__tag-sponsorship{display:block}}@media screen and (max-width:816px){}@media screen and (max-width:940px){html.html__responsive:not(.html__unpinned-leftnav) .zone-container-main,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__top-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__mid-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__sec-mid-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__bot-mid-leaderboard,html.html__responsive:not(.html__unpinned-leftnav) .everyoneloves__tag-sponsorship{display:none}}@media screen and (max-width:776px){}@media screen and (min-width:1050px){}@media screen and (max-width:414px){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5){}@media(prefers-color-scheme:dark){}</style>
<link rel=alternate type=application/atom+xml title="Feed for question 'How to use tower::Service and tower::Layer to create Axum middleware?'" href=https://stackoverflow.com/feeds/question/78210140>
<style>@media(max-width:640px){}@media(prefers-color-scheme:dark){}@media(prefers-color-scheme:dark){}@keyframes researchshow{0%{transform:translate3d(0,300px,0);opacity:0}25%{transform:translate3d(0,-12px,0);opacity:1}40%{transform:translate3d(0,-2px,0)}100%{transform:translate3d(0,0,0);opacity:1}}@keyframes researchhide{0%,50%{transform:translate3d(0,0,0);opacity:1}75%{transform:translate3d(0,-12px,0);opacity:1}100%{transform:translate3d(0,300px,0);opacity:0}}</style>

<style id=onetrust-style>@keyframes onetrust-fade-in{0%{opacity:0}100%{opacity:1}}@media only screen and (min-width:426px) and (max-width:896px) and (orientation:landscape){}@media(min-width:400px){}@media(min-width:550px){}@media(min-width:550px){}@media only screen and (max-width:530px){}</style><meta name=referrer content=no-referrer><link rel="shortcut icon" href=data:image/x-icon;base64,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/wMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACKI7g8kgPTvJID0/ySA89sggO8QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACKA9TQkgPPII4DzLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////wAAD/8AAA//P//P/z//z/8wAM//MADP/z//z/8/4E//+AB///AAf//wBD//8OA///+AH//+AA//+AQH//gYA//8cAP//8CD//+BB///Ag///4wf//+cP///+D////B////4/////////////////////// data-sf-original-href="https://cdn.sstatic.net/Sites/stackoverflow/Img/favicon.ico?v=ec617d715196"><style>.sf-hidden{display:none !important}</style><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style><noscript id=noscript-css><style>body,.s-topbar{margin-top:1.9em}</style></noscript></head>
 <body class="question-page unified-theme">
 
 <div id=notify-container></div>
 <div id=custom-header class=sf-hidden></div>
 
<header class="s-topbar ps-fixed t0 l0 js-top-bar sf-hidden">
 
 
</header>
 
 <div class=container>
 
<div id=left-sidebar data-is-here-when="md lg" class="left-sidebar js-pinned-left-sidebar ps-relative">
 <div class="left-sidebar--sticky-container js-sticky-leftnav">
 <nav aria-label=Primary>
 <ol class="nav-links sf-hidden">
 <li class=sf-hidden>
 <ol class="nav-links sf-hidden">
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </ol>
 </li>
 
 
 
 
 
 
 
 </ol>
 </nav>
 </div>
 <div class="s-popover mt4 ws3 sf-hidden" id=teams-were-moved-popover role=menu>
 
 
 
 </div>
 <div class="s-popover ws2 sf-hidden" id=popover-discover-collectives role=menu>
 
 
 </div>
 <div class="s-popover ws2 sf-hidden" id=popover-teams-create-cta role=menu aria-hidden=true>
 
 
 
 </div>
 <div class="s-popover ws2 sf-hidden" id=popover-labs-left-nav role=menu aria-hidden=true>
 
 <svg aria-hidden=true class="fc-black-600 mb8 svg-icon iconLabs" width=141 height=45 viewBox="0 0 141 45"><path fill=var(--black-600) d="M12.38 0h116.24C135.46 0 141 5.54 141 12.38v20.24c0 6.84-5.54 12.38-12.38 12.38H12.38A12.4 12.4 0 0 1 0 32.62V12.38C0 5.54 5.54 0 12.38 0m38.98 41h76.28a8.4 8.4 0 0 0 8.36-8.38V12.38A8.4 8.4 0 0 0 127.62 4H51.38A8.4 8.4 0 0 0 43 12.38v20.24A8.4 8.4 0 0 0 51.36 41m-22.4-12.94.17-2.38-13.26-2.55-.47 2.97zm.24-3.16 1.1-2.4-12-5.6-1.1 2.4zm1.6-3 1.7-2-10.2-8.5-1.7 2zM25 8.8l7.9 10.6 2.1-1.6-7.9-10.6zM29 32v-3H15v3zm2-6v8H13v-8h-3v11h24V26zm57.13 8a.87.87 0 0 0 .82-1.16l-7.83-21.27a.9.9 0 0 0-.82-.57h-2.6c-.37 0-.7.23-.82.57l-7.83 21.27a.86.86 0 0 0 .82 1.16h3.45c.37 0 .7-.24.82-.59l1.27-3.68h7.18l1.27 3.68c.12.35.45.59.82.59zm-11.16-8.75 2.1-5.93 2.03 5.93zM92 33.13c0 .48.38.87.85.87h8.5c2 0 3.81-.57 5.13-1.75a6.7 6.7 0 0 0 2.06-5.12 6 6 0 0 0-2.33-4.96c1.14-.97 2-2.54 2-4.48 0-2-.68-3.7-1.98-4.9a7.5 7.5 0 0 0-5.2-1.79h-8.18a.86.86 0 0 0-.85.87zm9.05-8.51c.94 0 1.57.28 1.97.67.39.38.63.95.63 1.7q-.02 1.11-.64 1.7c-.4.4-1.03.68-1.96.68H96.9v-4.75zm-.3-9c.89 0 1.53.24 1.93.59.38.33.64.84.64 1.6s-.25 1.27-.64 1.6a3 3 0 0 1-1.92.58h-3.87v-4.36zm10.39 14.16a.86.86 0 0 0-.01 1.2c2.17 2.23 4.64 3.02 7.9 3.02 2.3 0 4.36-.6 5.86-1.81a6.4 6.4 0 0 0 2.41-5.18c0-1.96-.6-3.73-1.97-4.93-1.03-.94-2.28-1.45-4.28-1.76l-2.35-.35a4 4 0 0 1-1.89-.76q-.5-.45-.5-1.3.01-1.09.7-1.7a3.2 3.2 0 0 1 2.23-.72c1.6 0 2.84.35 3.91 1.38.33.32.85.32 1.17 0l2-2a.86.86 0 0 0-.01-1.23c-1.95-1.84-4.08-2.61-6.98-2.61-2.3 0-4.25.67-5.63 1.92a6.7 6.7 0 0 0-2.12 5.07c0 1.88.55 3.45 1.77 4.61a8 8 0 0 0 4.38 1.9l2.43.35c1.16.17 1.47.34 1.8.66l.02.02c.32.28.53.78.53 1.54q-.02 1.13-.78 1.67c-.53.4-1.4.68-2.64.68-1.96 0-3.37-.43-4.68-1.75a.83.83 0 0 0-1.19 0zM66.15 34c.47 0 .85-.38.85-.86v-2.89a.86.86 0 0 0-.85-.86H57V11.9c0-.47-.48-.86-.96-.86h-3.18a.86.86 0 0 0-.85.86v21.24c0 .48.38.87.85.87z"></path></svg>
 
 
 </div>
</div>
 <div id=content class=snippet-hidden>
 
<div itemprop=mainEntity itemscope itemtype=https://schema.org/Question>
 <link itemprop=image href="https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon.png?v=c78bd457575a">
 <div class="inner-content clearfix">
 
 <div id=question-header class="d-flex sm:fd-column">
 <h1 itemprop=name class="fs-headline1 ow-break-word mb8 flex--item fl1"><a href=https://stackoverflow.com/questions/78210140/how-to-use-towerservice-and-towerlayer-to-create-axum-middleware class=question-hyperlink>How to use tower::Service and tower::Layer to create Axum middleware?</a></h1>
 <div class="ml12 aside-cta flex--item sm:ml0 sm:mb12 sm:order-first d-flex jc-end">
 <div class="ml12 aside-cta flex--item print:d-none">
 <a href=https://stackoverflow.com/questions/ask class="ws-nowrap s-btn s-btn__filled">
 Ask Question
 </a>
 </div>
 </div>
 </div>
 <div class="d-flex fw-wrap pb8 mb16 bb bc-black-200">
 <div class="flex--item ws-nowrap mr16 mb8" title="2024-03-23 08:13:05Z">
 <span class="fc-black-400 mr2">Asked</span>
 <time itemprop=dateCreated datetime=2024-03-23T08:13:05>4 months ago</time>
 </div>
 <div class="flex--item ws-nowrap mr16 mb8">
 <span class="fc-black-400 mr2">Modified</span>
 <a href=https://stackoverflow.com/questions/78210140/how-to-use-towerservice-and-towerlayer-to-create-axum-middleware?lastactivity class="s-link s-link__inherit" title="2024-03-24 00:40:15Z">4 months ago</a>
 </div>
 <div class="flex--item ws-nowrap mb8" title="Viewed 512 times">
 <span class="fc-black-400 mr2">Viewed</span>
 512 times
 </div>
 </div>
 <div id=mainbar role=main aria-label="question and answers">
 
<div class="question js-question" data-questionid=78210140 data-position-on-page=0 data-score=0 id=question>
 
<div class="js-zone-container zone-container-main">
 <div id=dfp-tlb class="everyonelovesstackoverflow everyoneloves__top-leaderboard everyoneloves__leaderboard sf-hidden"></div>
 <div class=js-report-ad-button-container style=width:728px></div>
</div>
 <div class=post-layout>
 <div class="votecell post-layout--left">
 
<div class="js-voting-container d-flex jc-center fd-column ai-center gs4 fc-black-300" data-post-id=78210140 data-referrer=None>
 <button class="js-vote-up-btn flex--item s-btn s-btn__muted s-btn__outlined bar-pill bc-black-225 f:bc-theme-secondary-400 f:bg-theme-secondary-400 f:fc-black-050 h:bg-theme-primary-200" data-controller=s-tooltip data-s-tooltip-placement=right aria-pressed=false aria-label="Up vote" data-selected-classes="fc-theme-primary bc-theme-primary bg-theme-primary-100" data-unselected-classes="bc-black-225 f:bc-theme-secondary-400 f:bg-theme-secondary-400 f:fc-black-050 h:bg-theme-primary-200" aria-describedby=--stacks-s-tooltip-kvnniy2z>
 <svg aria-hidden=true class="svg-icon iconArrowUp" width=18 height=18 viewBox="0 0 18 18"><path d="M1 12h16L9 4z"></path></svg>
 </button><div id=--stacks-s-tooltip-kvnniy2z class="s-popover s-popover__tooltip sf-hidden" role=tooltip>This question shows research effort; it is useful and clear</div>
 
 <div class="js-vote-count flex--item d-flex fd-column ai-center fc-theme-body-font fw-bold fs-subheading py4" itemprop=upvoteCount data-value=0>
 0
 </div>
 <button class="js-vote-down-btn js-vote-down-question flex--item mb8 s-btn s-btn__muted s-btn__outlined bar-pill bc-black-225 f:bc-theme-secondary-400 f:bg-theme-secondary-400 f:fc-black-050 h:bg-theme-primary-200" aria-pressed=false aria-label="Down vote" data-selected-classes="fc-theme-primary bc-theme-primary bg-theme-primary-100" data-unselected-classes="bc-black-225 f:bc-theme-secondary-400 f:bg-theme-secondary-400 f:fc-black-050 h:bg-theme-primary-200" data-s-tooltip-placement=right data-controller=" s-tooltip" aria-describedby=--stacks-s-tooltip-8yl06jho>
 <svg aria-hidden=true class="svg-icon iconArrowDown" width=18 height=18 viewBox="0 0 18 18"><path d="M1 6h16l-8 8z"></path></svg>
 </button><div id=--stacks-s-tooltip-8yl06jho class="s-popover s-popover__tooltip sf-hidden" role=tooltip>This question does not show any research effort; it is unclear or not useful</div>
 
 
<button class="js-saves-btn s-btn s-btn__unset c-pointer py4" type=button id=saves-btn-78210140 data-controller=s-tooltip data-s-tooltip-placement=right data-s-popover-placement aria-pressed=false data-post-id=78210140 data-post-type-id=1 data-user-privilege-for-post-click=-1 aria-controls data-s-popover-auto-show=false aria-describedby=--stacks-s-tooltip-s2v3sqq4>
 <svg aria-hidden=true class="fc-theme-primary-400 js-saves-btn-selected d-none svg-icon iconBookmark" width=18 height=18 viewBox="0 0 18 18"><path d="M3 17V3c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v14l-6-4z"></path></svg>
 <svg aria-hidden=true class="js-saves-btn-unselected svg-icon iconBookmarkAlt" width=18 height=18 viewBox="0 0 18 18"><path d="m9 10.6 4 2.66V3H5v10.26zM3 17V3c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v14l-6-4z"></path></svg>
</button><div id=--stacks-s-tooltip-s2v3sqq4 class="s-popover s-popover__tooltip sf-hidden" role=tooltip>Save this question.</div>
 
 <a class="js-post-issue flex--item s-btn s-btn__unset c-pointer py6 mx-auto" href=https://stackoverflow.com/posts/78210140/timeline data-shortcut=T data-ks-title=timeline data-controller=s-tooltip data-s-tooltip-placement=right aria-label=Timeline aria-describedby=--stacks-s-tooltip-z4f2rpln><svg aria-hidden=true class="mln2 mr0 svg-icon iconHistory" width=19 height=18 viewBox="0 0 19 18"><path d="M3 9a8 8 0 1 1 3.73 6.77L8.2 14.3A6 6 0 1 0 5 9l3.01-.01-4 4-4-4zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10z"></path></svg></a><div id=--stacks-s-tooltip-z4f2rpln class="s-popover s-popover__tooltip sf-hidden" role=tooltip>Show activity on this post.</div>
</div>
 </div>
 
<div class="postcell post-layout--right">
 
 <div class="s-prose js-post-body" itemprop=text>
 
<p>I'm trying to use a custom middleware in Axum to implement JWT authentication. However, I'm unable to compile it when attempting to return an error for failed validation. Below is the JWT middleware validation code I've written. Can you advise me on how to modify it to achieve the desired functionality?</p>
<pre class="lang-rust s-code-block"><code data-highlighted=yes class="hljs language-rust"><span class=hljs-comment>//custom_middleware.rs</span>
<span class=hljs-keyword>use</span> axum::http::StatusCode;
<span class=hljs-keyword>use</span> axum::{extract::Request, response::Response};
<span class=hljs-keyword>use</span> futures_util::future::BoxFuture;
<span class=hljs-keyword>use</span> jsonwebtoken::{
    decode, errors::Error <span class=hljs-keyword>as</span> JwtError, Algorithm, DecodingKey, TokenData, Validation,
};
<span class=hljs-keyword>use</span> serde::{Deserialize, Serialize};
<span class=hljs-keyword>use</span> std::task::{Context, Poll};
<span class=hljs-keyword>use</span> tower::{Layer, Service};

<span class=hljs-meta>#[derive(Serialize, Deserialize)]</span>
<span class=hljs-keyword>pub</span> <span class=hljs-keyword>struct</span> <span class="hljs-title class_">Claims</span> {
    <span class=hljs-keyword>pub</span> id: <span class=hljs-type>usize</span>,
    <span class=hljs-keyword>pub</span> exp: <span class=hljs-type>usize</span>,
}

<span class=hljs-meta>#[derive(Clone)]</span>
<span class=hljs-keyword>pub</span> <span class=hljs-keyword>struct</span> <span class="hljs-title class_">MyLayer</span>;

<span class=hljs-keyword>impl</span>&lt;S&gt; Layer&lt;S&gt; <span class=hljs-keyword>for</span> <span class="hljs-title class_">MyLayer</span> {
    <span class=hljs-keyword>type</span> <span class="hljs-title class_">Service</span> = MyMiddleware&lt;S&gt;;

    <span class=hljs-keyword>fn</span> <span class="hljs-title function_">layer</span>(&amp;<span class=hljs-keyword>self</span>, inner: S) <span class=hljs-punctuation>-&gt;</span> <span class=hljs-keyword>Self</span>::Service {
        MyMiddleware { inner }
    }
}

<span class=hljs-meta>#[derive(Clone)]</span>
<span class=hljs-keyword>pub</span> <span class=hljs-keyword>struct</span> <span class="hljs-title class_">MyMiddleware</span>&lt;S&gt; {
    inner: S,
}

<span class=hljs-keyword>impl</span>&lt;S&gt; Service&lt;Request&gt; <span class=hljs-keyword>for</span> <span class="hljs-title class_">MyMiddleware</span>&lt;S&gt;
<span class=hljs-keyword>where</span>
    S: Service&lt;Request, Response = Response&gt; + <span class=hljs-built_in>Send</span> + <span class=hljs-symbol>'static</span>,
    S::Future: <span class=hljs-built_in>Send</span> + <span class=hljs-symbol>'static</span>,
{
    <span class=hljs-keyword>type</span> <span class="hljs-title class_">Response</span> = S::Response;
    <span class=hljs-keyword>type</span> <span class="hljs-title class_">Error</span> = S::Error;
    <span class=hljs-keyword>type</span> <span class="hljs-title class_">Future</span> = BoxFuture&lt;<span class=hljs-symbol>'static</span>, <span class=hljs-type>Result</span>&lt;<span class=hljs-keyword>Self</span>::Response, <span class=hljs-keyword>Self</span>::Error&gt;&gt;;

    <span class=hljs-keyword>fn</span> <span class="hljs-title function_">poll_ready</span>(&amp;<span class=hljs-keyword>mut</span> <span class=hljs-keyword>self</span>, cx: &amp;<span class=hljs-keyword>mut</span> Context&lt;<span class=hljs-symbol>'_</span>&gt;) <span class=hljs-punctuation>-&gt;</span> Poll&lt;<span class=hljs-type>Result</span>&lt;(), <span class=hljs-keyword>Self</span>::Error&gt;&gt; {
        <span class=hljs-keyword>self</span>.inner.<span class="hljs-title function_ invoke__">poll_ready</span>(cx)
    }

    <span class=hljs-keyword>fn</span> <span class="hljs-title function_">call</span>(&amp;<span class=hljs-keyword>mut</span> <span class=hljs-keyword>self</span>, req: Request) <span class=hljs-punctuation>-&gt;</span> <span class=hljs-keyword>Self</span>::Future {
        <span class=hljs-keyword>match</span> <span class="hljs-title function_ invoke__">has_permission</span>(&amp;req) {
            <span class="hljs-title function_ invoke__">Ok</span>(_) =&gt; {
                <span class=hljs-keyword>let</span> <span class=hljs-variable>future</span> = <span class=hljs-keyword>self</span>.inner.<span class="hljs-title function_ invoke__">call</span>(req);
                <span class=hljs-type>Box</span>::<span class="hljs-title function_ invoke__">pin</span>(<span class=hljs-keyword>async</span> <span class=hljs-keyword>move</span> {
                    <span class=hljs-keyword>let</span> <span class=hljs-variable>response</span>: Response = future.<span class=hljs-keyword>await</span>?;
                    <span class="hljs-title function_ invoke__">Ok</span>(response)
                })
            }
            <span class="hljs-title function_ invoke__">Err</span>(_) =&gt; <span class="hljs-title function_ invoke__">Err</span>((StatusCode::BAD_REQUEST, <span class=hljs-string>"bad request"</span>)),
        }
    }
}

<span class=hljs-keyword>fn</span> <span class="hljs-title function_">has_permission</span>(req: &amp;Request) <span class=hljs-punctuation>-&gt;</span> <span class=hljs-type>Result</span>&lt;TokenData&lt;Claims&gt;, (StatusCode, &amp;<span class=hljs-symbol>'static</span> <span class=hljs-type>str</span>)&gt; {
    <span class=hljs-keyword>let</span> <span class=hljs-variable>secret</span> = <span class=hljs-string>"baby195lxl"</span>;
    <span class=hljs-keyword>let</span> <span class=hljs-variable>authorization_header_option</span> = req.<span class="hljs-title function_ invoke__">headers</span>().<span class="hljs-title function_ invoke__">get</span>(<span class=hljs-string>"authorization"</span>);
    <span class=hljs-keyword>if</span> authorization_header_option.<span class="hljs-title function_ invoke__">is_none</span>() {
        <span class=hljs-keyword>return</span> <span class="hljs-title function_ invoke__">Err</span>((StatusCode::BAD_REQUEST, <span class=hljs-string>"authorization header is none"</span>));
    }
    <span class=hljs-keyword>let</span> <span class=hljs-variable>authentication_token</span>: <span class=hljs-type>String</span> = authorization_header_option
        .<span class="hljs-title function_ invoke__">unwrap</span>()
        .<span class="hljs-title function_ invoke__">to_str</span>()
        .<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class=hljs-string>""</span>)
        .<span class="hljs-title function_ invoke__">to_string</span>();

    <span class=hljs-keyword>if</span> authentication_token.<span class="hljs-title function_ invoke__">is_empty</span>() {
        <span class=hljs-keyword>return</span> <span class="hljs-title function_ invoke__">Err</span>((StatusCode::BAD_REQUEST, <span class=hljs-string>"authorization header is empty"</span>));
    }
    <span class=hljs-keyword>let</span> <span class=hljs-variable>token_result</span>: <span class=hljs-type>Result</span>&lt;TokenData&lt;Claims&gt;, JwtError&gt; = decode::&lt;Claims&gt;(
        &amp;authentication_token,
        &amp;DecodingKey::<span class="hljs-title function_ invoke__">from_secret</span>(secret.<span class="hljs-title function_ invoke__">as_bytes</span>()),
        &amp;Validation::<span class="hljs-title function_ invoke__">new</span>(Algorithm::HS256),
    );
    <span class=hljs-keyword>match</span> token_result {
        <span class="hljs-title function_ invoke__">Ok</span>(_token) =&gt; <span class="hljs-title function_ invoke__">Ok</span>(_token),
        <span class="hljs-title function_ invoke__">Err</span>(_e) =&gt; <span class="hljs-title function_ invoke__">Err</span>((StatusCode::UNAUTHORIZED, <span class=hljs-string>"Token Error"</span>)),
    }
}
</code></pre>
<pre class="lang-rust s-code-block"><code data-highlighted=yes class="hljs language-rust"><span class=hljs-comment>//main.rs</span>
<span class=hljs-keyword>use</span> axum::{
    body::Bytes,
    extract::{Json, Request, State},
    routing::{get, post},
    Router,
};
<span class=hljs-keyword>use</span> jsonwebtoken::{decode, encode, Algorithm, DecodingKey, EncodingKey, Header, Validation};
<span class=hljs-keyword>use</span> serde::Deserialize;

<span class=hljs-keyword>use</span> std::time::{Duration, SystemTime, UNIX_EPOCH};
<span class=hljs-keyword>use</span> tower_http::trace::TraceLayer;
<span class=hljs-keyword>use</span> tracing::Span;
<span class=hljs-keyword>use</span> tracing_subscriber::{layer::SubscriberExt, util::SubscriberInitExt};

<span class=hljs-keyword>mod</span> custom_middleware;
<span class=hljs-keyword>use</span> custom_middleware::Claims;
<span class=hljs-keyword>use</span> custom_middleware::MyLayer;

<span class=hljs-keyword>mod</span> state;
<span class=hljs-keyword>use</span> state::AppState;

<span class=hljs-meta>#[derive(Deserialize, Debug, PartialEq)]</span>
<span class=hljs-keyword>struct</span> <span class="hljs-title class_">User</span> {
    account: <span class=hljs-type>usize</span>,
    password: <span class=hljs-type>String</span>,
}

<span class=hljs-keyword>async</span> <span class=hljs-keyword>fn</span> <span class="hljs-title function_">register</span>(<span class="hljs-title function_ invoke__">State</span>(state): State&lt;AppState&gt;, <span class="hljs-title function_ invoke__">Json</span>(user): Json&lt;User&gt;) <span class=hljs-punctuation>-&gt;</span> <span class=hljs-type>String</span> {
    <span class=hljs-keyword>let</span> <span class=hljs-variable>store_user</span> = User {
        account: <span class=hljs-number>195</span>,
        password: <span class=hljs-string>"world"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
    };
    <span class=hljs-keyword>if</span> user == store_user {
        <span class=hljs-keyword>let</span> <span class=hljs-variable>expiration</span> = SystemTime::<span class="hljs-title function_ invoke__">now</span>() + Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class=hljs-number>30</span> * <span class=hljs-number>60</span>);
        <span class=hljs-keyword>let</span> <span class=hljs-variable>exp_timestamp</span> = expiration.<span class="hljs-title function_ invoke__">duration_since</span>(UNIX_EPOCH).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">as_secs</span>();
        <span class=hljs-keyword>let</span> <span class=hljs-variable>claims</span> = Claims {
            id: user.account,
            exp: exp_timestamp <span class=hljs-keyword>as</span> <span class=hljs-type>usize</span>,
        };
        <span class=hljs-keyword>let</span> <span class=hljs-variable>token</span> = <span class="hljs-title function_ invoke__">encode</span>(
            &amp;Header::<span class="hljs-title function_ invoke__">default</span>(),
            &amp;claims,
            &amp;EncodingKey::<span class="hljs-title function_ invoke__">from_secret</span>(state.secret.<span class="hljs-title function_ invoke__">as_bytes</span>()),
        )
        .<span class="hljs-title function_ invoke__">unwrap</span>();
        token
    } <span class=hljs-keyword>else</span> {
        <span class=hljs-string>"hello, world!"</span>.<span class="hljs-title function_ invoke__">to_string</span>()
    }
}

<span class=hljs-keyword>async</span> <span class=hljs-keyword>fn</span> <span class="hljs-title function_">login</span>(<span class="hljs-title function_ invoke__">State</span>(state): State&lt;AppState&gt;, req: Request) <span class=hljs-punctuation>-&gt;</span> Json&lt;Claims&gt; {
    <span class=hljs-keyword>let</span> <span class=hljs-variable>token</span> = req
        .<span class="hljs-title function_ invoke__">headers</span>()
        .<span class="hljs-title function_ invoke__">get</span>(<span class=hljs-string>"Authorization"</span>)
        .<span class="hljs-title function_ invoke__">unwrap</span>()
        .<span class="hljs-title function_ invoke__">to_str</span>()
        .<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class=hljs-keyword>let</span> <span class=hljs-variable>payload</span> = decode::&lt;Claims&gt;(
        token,
        &amp;DecodingKey::<span class="hljs-title function_ invoke__">from_secret</span>(state.secret.<span class="hljs-title function_ invoke__">as_bytes</span>()),
        &amp;Validation::<span class="hljs-title function_ invoke__">new</span>(Algorithm::HS256),
    )
    .<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-title function_ invoke__">Json</span>(payload.claims)
}

<span class=hljs-keyword>async</span> <span class=hljs-keyword>fn</span> <span class="hljs-title function_">protected</span>(_req: Request) <span class=hljs-punctuation>-&gt;</span> <span class=hljs-type>String</span> {
    <span class=hljs-string>"World!"</span>.<span class="hljs-title function_ invoke__">to_string</span>()
}
<span class=hljs-meta>#[tokio::main]</span>
<span class=hljs-keyword>async</span> <span class=hljs-keyword>fn</span> <span class="hljs-title function_">main</span>() {
    <span class=hljs-keyword>let</span> <span class=hljs-variable>state</span> = AppState {
        secret: <span class=hljs-string>"baby195lxl"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
    };
    tracing_subscriber::<span class="hljs-title function_ invoke__">registry</span>()
        .<span class="hljs-title function_ invoke__">with</span>(tracing_subscriber::EnvFilter::<span class="hljs-title function_ invoke__">new</span>(<span class=hljs-string>"debug"</span>))
        .<span class="hljs-title function_ invoke__">with</span>(tracing_subscriber::fmt::<span class="hljs-title function_ invoke__">layer</span>())
        .<span class="hljs-title function_ invoke__">init</span>();

    <span class=hljs-keyword>let</span> <span class=hljs-variable>app</span> = Router::<span class="hljs-title function_ invoke__">new</span>()
        .<span class="hljs-title function_ invoke__">route</span>(<span class=hljs-string>"/protected"</span>, <span class="hljs-title function_ invoke__">get</span>(protected))
        .<span class="hljs-title function_ invoke__">layer</span>(MyLayer)
        .<span class="hljs-title function_ invoke__">route</span>(<span class=hljs-string>"/register"</span>, <span class="hljs-title function_ invoke__">post</span>(register))
        .<span class="hljs-title function_ invoke__">route</span>(<span class=hljs-string>"/login"</span>, <span class="hljs-title function_ invoke__">post</span>(login))
        .<span class="hljs-title function_ invoke__">with_state</span>(state)
        .<span class="hljs-title function_ invoke__">layer</span>(TraceLayer::<span class="hljs-title function_ invoke__">new_for_http</span>().<span class="hljs-title function_ invoke__">on_body_chunk</span>(
            |chunk: &amp;Bytes, latency: Duration, _span: &amp;Span| {
                tracing::debug!(<span class=hljs-string>"streaming {} bytes in {:?}"</span>, chunk.<span class="hljs-title function_ invoke__">len</span>(), latency);
            },
        ));

    <span class=hljs-keyword>let</span> <span class=hljs-variable>listener</span> = tokio::net::TcpListener::<span class="hljs-title function_ invoke__">bind</span>(<span class=hljs-string>"127.0.0.1:5000"</span>)
        .<span class=hljs-keyword>await</span>
        .<span class="hljs-title function_ invoke__">unwrap</span>();
    tracing::debug!(<span class=hljs-string>"listening on {}"</span>, listener.<span class="hljs-title function_ invoke__">local_addr</span>().<span class="hljs-title function_ invoke__">unwrap</span>());
    axum::<span class="hljs-title function_ invoke__">serve</span>(listener, app).<span class=hljs-keyword>await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
}
</code></pre>
<pre class="lang-rust s-code-block"><code data-highlighted=yes class="hljs language-rust"><span class="hljs-title function_ invoke__">Err</span>(_) =&gt; <span class="hljs-title function_ invoke__">Err</span>((StatusCode::BAD_REQUEST, <span class=hljs-string>"bad request"</span>)),
   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Pin&lt;<span class=hljs-type>Box</span>&lt;<span class=hljs-keyword>dyn</span> Future&lt;Output = ...&gt; + <span class=hljs-built_in>Send</span>&gt;&gt;`, found `<span class=hljs-type>Result</span>&lt;_, (StatusCode, &amp;<span class=hljs-type>str</span>)&gt;`
</code></pre>
<p>I have not yet found a solution that doesn't produce errors. The configuration of Cargo.toml is as follows, and the Rust compiler version I am using is rustc 1.76.0 (07dca489a 2024-02-04). I would appreciate it if someone could help me clear up this confusion, and any reply are welcome. Thanks.</p>
<pre class="lang-ini s-code-block"><code data-highlighted=yes class="hljs language-ini"><span class=hljs-section>[dependencies]</span>
<span class=hljs-attr>axum</span> = <span class=hljs-string>"^0.7"</span>
<span class=hljs-attr>tokio</span> = { version = <span class=hljs-string>"^1.36"</span>, features = [<span class=hljs-string>"full"</span>] }
<span class=hljs-attr>tower-http</span> = { version = <span class=hljs-string>"^0.5"</span>, features = [<span class=hljs-string>"trace"</span>] }
<span class=hljs-attr>tracing</span> = <span class=hljs-string>"^0.1"</span>
<span class=hljs-attr>tracing-subscriber</span> = { version = <span class=hljs-string>"^0.3"</span>, features = [<span class=hljs-string>"env-filter"</span>] }
<span class=hljs-attr>serde</span> = { version = <span class=hljs-string>"1.0"</span>, features = [<span class=hljs-string>"derive"</span>] }
<span class=hljs-attr>jsonwebtoken</span> = <span class=hljs-string>"9.2.0"</span>
<span class=hljs-attr>tower</span> = <span class=hljs-string>"0.4.13"</span>
<span class=hljs-attr>futures-util</span> = <span class=hljs-string>"0.3.30"</span>
</code></pre>
 </div>
 <div class="mt24 mb12">
 <div class="post-taglist d-flex gs4 gsy fd-column">
 <div class="d-flex ps-relative fw-wrap">
 
 <ul class="ml0 list-ls-none js-post-tag-list-wrapper d-inline"><li class="d-inline mr4 js-post-tag-list-item"><a href=https://stackoverflow.com/questions/tagged/rust class="s-tag post-tag js-gps-track" title="show questions tagged 'rust'" aria-label="show questions tagged 'rust'" rel=tag aria-labelledby=tag-rust-tooltip-container data-tag-menu-origin=Unknown>rust</a><li class="d-inline mr4 js-post-tag-list-item"><a href=https://stackoverflow.com/questions/tagged/jwt class="s-tag post-tag js-gps-track" title="show questions tagged 'jwt'" aria-label="show questions tagged 'jwt'" rel=tag aria-labelledby=tag-jwt-tooltip-container data-tag-menu-origin=Unknown>jwt</a><li class="d-inline mr4 js-post-tag-list-item"><a href=https://stackoverflow.com/questions/tagged/rust-axum class="s-tag post-tag js-gps-track" title="show questions tagged 'rust-axum'" aria-label="show questions tagged 'rust-axum'" rel=tag aria-labelledby=tag-rust-axum-tooltip-container data-tag-menu-origin=Unknown>rust-axum</a></ul>
 </div>
 </div>
 </div>
 <div class=mb0>
 <div class="mt16 d-flex gs8 gsy fw-wrap jc-end ai-start pt4 mb16">
 <div class="flex--item mr16 fl1 w96">
 
<div class="js-post-menu pt2" data-post-id=78210140 data-post-type-id=1>
 <div class="d-flex gs8 s-anchors s-anchors__muted fw-wrap">
 <div class=flex--item>
 <a href=https://stackoverflow.com/q/78210140/23534397 rel=nofollow itemprop=url class="js-share-link js-gps-track" title="Short permalink to this question" data-gps-track="post.click({ item: 2, priv: -1, post_type: 1 })" data-controller="se-share-sheet s-popover" data-se-share-sheet-title="Share a link to this question" data-se-share-sheet-subtitle="(Includes your user id)" data-se-share-sheet-post-type=question data-se-share-sheet-social="facebook twitter devto" data-se-share-sheet-location=1 data-se-share-sheet-license-url=https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f4.0%2f data-se-share-sheet-license-name="CC BY-SA 4.0" data-s-popover-placement=bottom-start aria-controls=se-share-sheet-0 data-action=" s-popover#toggle se-share-sheet#preventNavigation s-popover:show->se-share-sheet#willShow s-popover:shown->se-share-sheet#didShow" aria-expanded=false>Share</a><div class="s-popover z-dropdown s-anchors s-anchors__default sf-hidden" style=width:unset;max-width:28em id=se-share-sheet-0></div>
 </div>
 <div class=flex--item>
 <a href=https://stackoverflow.com/posts/78210140/edit class="js-suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: -1, post_type: 1 })" title="Revise and improve this post">Edit</a>
 </div>
 <div class=flex--item>
 <button type=button id=btnFollowPost-78210140 class="s-btn s-btn__link js-follow-post js-follow-question js-gps-track" data-gps-track="post.click({ item: 14, priv: -1, post_type: 1 })" data-controller="s-tooltip " data-s-tooltip-placement=bottom data-s-popover-placement=bottom aria-controls aria-describedby=--stacks-s-tooltip-epenbev9>
 Follow
 
 </button><div id=--stacks-s-tooltip-epenbev9 class="s-popover s-popover__tooltip sf-hidden" role=tooltip>Follow this question to receive notifications</div>
 </div>
 </div>
 <div class=js-menu-popup-container></div>
</div>
 </div>
 <div class="post-signature owner flex--item">
 <div class="user-info user-hover">
 <div class=d-flex>
 <div class="user-action-time fl-grow1">
 asked <span title="2024-03-23 08:13:05Z" class=relativetime>Mar 23 at 8:13</span>
 </div>
 
 </div>
 <div class=user-gravatar32>
 <a href=https://stackoverflow.com/users/18971000/baby195lxl><div class=gravatar-wrapper-32><img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAOXklEQVR42tWbeXCUZbbGf9/X+57O0kkn6ZCts4JhiQwOiizCjBuiuM+oKLiVV+9479Q4WledGq2ambrL1PWfqYs4KiADFwFBEDcWRZYkBEkQQxDEpLN1Z093utPp7f5BiMR0Op1OB72nKpVK5+t3ed7znnOe530/oa+3I8QVtlAoRDAYJBQCCCEIAoIgIIrilR4K0qnuwO/309LayvnzFzh37jxtrW309TkJhr4HAAQEAWQyGUajkWlZFqzWfLKzp5GUlDil4xOmwgMCgQDnzp2norKK06fr6O7uxu8PTLgdpVKJ2ZzGnNmzKC+fhclk+mkDMDDgpbLqOJ9+up+WllaCwWDcBqpQKJheWsKyZUvIz89DEISfDgDBYJATJ06yfcdO2trsU+qyEomEWTPLuP2O5ZjT0n58AByOdv6x+X85dep03FZcr9fT19cX8RmVSsXNN/+SpTcsRiaT/TgAVFRU8c6mLbhcrritcElxETfeuIzDR45RVVVNIDB27BAEAas1nzWrV5GcnBRTf2KsQW7btvdY98ZbcZ08QHtHJyaTCYlEEnHyl9Lp2bPf8Oe//Adnz567Mh4wOOhj48ZNHD5yjFAo/iWEWq0iEAgil8txOp1Rf0+lUrFm9UPMmjVz6gDw+/28+dYGjh6t4KdoCoWCJx5fQ1nZjPhvgVAoxNZ3d3DsWCU/VfN6vby+7k3Onf82/gAcOnSYffsORHT77GlZSCSSCQ1ao9HEFQS3282619+ku7snfgA0NDSyecu7EdPc9OmlPPHEo9y5ckVUaUmpVLL6kYd49ZWXmDGjNK4gONrbeXv9xnGDaFQAeL1e1m/YxMDAQMTnGhtt1J2pp9HWhM/ni/hsRkY6z//+t4j6JP5n5wEefuRhbl+xfMLeE8lqa7/i4GeHJh8E9374MVu3bh+/oaHSVBCEiJ5yzbyfcc+9d/HugUq2fHyYQDBIZmoSL6y6A5+rh3VvvE1vb29cQNBqtbz80gsRCVVED+jq6ubDvR9HHSQv0dxwJpPJeODX93H7XSt55e/b2fThIQJDzzbZO/mXv77FhS4PL/7bcxQWWOMCgMvlYtf7e2LfAvv2H8QZh0LHZDLx++d+S0J6Fk/9ZR1f1l8YTaQGffz35j2s2/05Tz71JDfd+Iu46AMVFVW0tLSOzS2ef/53fwj3D6fTxfr17+D1eic1gNmzZ/HM00+SmJREQ2s7Hq+X2UV5lBfnoZDJWHXrIlrau3nqrl9is3dw0/w5KGRSrpk7hyyLhbq6MwwODk6KmgeCQWaWXTUxD6ipqaV3iJDotFrUavWEO09MNGI2p/HJp/vZvXsPJo2UbLOJ4uwMyqzZZKQkct3MYhINWhbMLsGo03JtWSFnak+yc+duBEGgtLRk0tS3+viJMePKmIpQQ2MjSqUSnU7LittuxR/w895770edXy/FkD179n6f89VqQD4utf503wGKCgtYvHgh58+fj3nioigilUgwJBhobbVjMBiiB+D+++7h7rtW4nC0o9fr6OzqJstiQRAEenv7hjS90AS2wkyuvrqcD47VRub7UimrH3mIje9spup4NRe+a4yqH4lEgkqlIjMjnUxLBhaLhcyMdMzmNBQKxZheNGEyFAqF6O3ro6W5haamZhptTdhsTdjtDvx+f9gsUF4+m+W33ozTD/++/j2UchkyqZTOXifZ6SbOfNdMcXYGX19oYunPynh0xRJqak7xj81b6erqGgGAIAhIpRISjYlYLJlDPxmkp6eTnJw04cA5YVFUEAQSDAYSDAZKSoovY4mDtLa20dzSis1mw2ZrpqmpGbfbTVpqKt0Dftbv+YzGto4R7bV1XtxSR0+dBeCTihoGvIM8umIJWo0aj8dDujmNTEsmWZZMMjIzSDeb0WjUxMPiLooGg0H8fj8ORzuNjTZO1tSSmZGBLDmd/9y4KzpWJ5fxzivPsHXLVszmNHKys7FYMlCr1Uil8RWyJ9Wa3+9nYGAAW1MzTbZmbDYbzc0ttLbZR5TOKcnJFGakcu+y+VHrfnKpFJutaZh6C4JAcnIS6WYzlqxMsiwWLJZMjMYEZDJZzJlCGt2qhvD5fPT09NBos9Fku7j329raaG/vGFcLtDscuLvaWVKWj2gyse7sBURBQCIIw78lAkgFkV/nZeFsbqbu6zo8Hs+I2NPe3kF7ewc1taeGP9fptJjTvt8iFksmqampKBTyqLjFqC0QCoXod7tpa7NjszVha7TR3NJCW5tjTIXGmJCAKIp0dnVF7GzRwgWYFi/h3s/DCyqiALsWz+fUjh1UVh6fhDAiJ9WUSnqG+aKnZGWSmZGOWq0exVRHeYDd7uDlP7w6LqP7XsHVcd99d6NSqXjr7Q10do4NgiHBQNsYrFIvk3FfjgWrTkODXj9JYWSQRpuNRpttWMARRZHS0mL++ZmnRmSKUQAEgoGoJw/Q1+ekqbkZhVw+bpFk0Oup84wEIFEh54HcLJYnGTl6rIZafxCDXhd3tSgYDNLT0zt+DIgllOzevXd4+0QEwGCgbQgAk1LBqvxpLNPr+Pzwl7xcdQqPd5AHbrqenCkA4HLKHhEAUZTEhG40ZjDoETv7eLmsmGuVSvYdqubFE6cZ9PmHn+lx9aO3WKYEAFEURoEwCgC5XI5CoZg0CwyHvsGgZ40oZ9unR3ix5gy+MAemvU43+knGgLEld834AKjVKrRaTdwBkEgkaLVanvnrhuHqLywNd3swTBEAKSnJ49NhpVJJotEYkWHFIlTotFqCIeh29odfHaWCm6+dw8rli9Bo1EgkYhgQRczm2A9E08N8N+xMsnOyx5S1SkqKmDu3HKVSOaHO9QY9TreHQGBkvNBrVKxcPI9//adf0ZBvYXVtHYIootFoR/W9fPktPP7YakqKi2ICIDc3J7pKsMCazyef7Bv9sFTKsqU3kJhopL7+7LhK8YiJ6nT0ujwEhzJFol7LjfNnkzujgC1tDl6trsXtD6CUSOjzB9BqNSNOiH0+H50dXXR0dGBrap7w5A0GA2lhjtPDApCXl4tGo6a/3z3ic4/Hw54PPkQURZxO14Q9oMfVT0qCjpuvKyejOJeNTa28UHmSgcv0+0AoRI/fj1arHdXGsYoKvjh8BFGceLLOyZkWlkFKx0pXVms+J0+OFi/q68/G5H4JBgO5GWk89vg9vNHQxEdHTzAYJn0GQiG6B33odKMBGBz0DaXdifc/9+ry6DVBQRD4+TXz4hqBDQkG9rR3cveRat63tYadPIB2iO7GMxUaDAamTy+ZmCg6fXoJqammOA5CT11v35gTN8plPFmYy5ary0j1BdDHsRosL58ddktFBECpVHL9guviNogEgwH7wOjaIkWp4NkSK5vnXEX6ORt/fm0Dh2vr41YLKJVKFi+6PjY9YNGiBeTmZsflIoTFkomj0TH8t1mlZFX+NBaq1Rw6epJXq0/jHgKop8/FLb+YP6mcfzkAkdqRRubVCkRRZPv2nQRDsV+AEgWR3zz7NPaBASwaFWusOcyTy9n/RTV//LKOgcGR7LPb2Y/L5WLHjl2TmrxOr+ORhx+anCYYCATo7OwkGIzdCwRBwGRKYdMFG3n+AB99dpyKr86OIEGX26zCHP701P10dHROCgC5XE5ionFykphEIkGpVLJ27d9x9ffHNJBUk4mHHn6QMx8dZmPd+bAk6PLKcGZhDn6/n7Vr3xgunCZqRUUF3HP3nfFThV2ufvr7+2OKB3K5jH5fkDWv/G34RHhUkNRpuGn+bIpmFvFJdw8vXVWMw9EeU39SqRSdTodCIY+fKqzVajjx5UkOHvycixeco7fS0hKsV80Ku5qJei23LihnWqmVza12Xqo4SYgQvynMY+u72+kaR2ccDbaCBx+8P6rJT8gDLqnDHo+b3t6+Ca2MVqul5tsm/vj61u/Tn1HP8gVXk1qUw3pbKx+12IdLYoUoUnnLYlQeN4Pe6E+GZTIZer0epVIRX1n8ckVFrVZz4MDn1F4mTY9nCxctoNN7seRIS0rgtoVz0eZZeLuhmQPHvhxVHPlDIbq8g9TvP8j5c9Hd+JJIJdy2/BZMppSJBehYToZCoRCBQACHoz0qATUlJZkDJ+oYDASQZJlZd8HGsfZOfBEyy7aF85ipkEV1WVKv16HT6ZFKJy7nxXQydPGAUkp/v5s9H+zFP0Y6u2QrV65Ak5fFa1/VU11xkkCE7WNSKng4P5syo4FTFZVUVVVHbDspOYmVd9wW0+Rj9oAf2sCAl7ozZwgGwkf46TNK+dWRE+xrdYyt1qhVPGrNZr5Syf5DxymclsG103NpaLCFL3J0WqzW/ElfnojLSaNCIUejVnPws0ME/D/0BoHi4kLsnvDiyTStmscLcpkjSvjos0pePnWxQDLqtHR1dVNZWTWaOBmNLF26JC4vTcQFAEEQKCiwUjB0u8tud1B3pp5AIIBMKkOpVA6fB1wyq17Lk4V5FPsD7N5fwa4fFEjdzn5SU00UFBZczCQaDTNmTEetVsWVpk/JS1MpKcmEQiGOV5/AFXDh9gdwDnlGSYKep4vyyHJ72bX3EJvPXhilEwL0OPsJBoPY7Q6yLJmUlBbHffJxiwHjWUO/m8eOnODxghySe5zs2HeUr79tGrMqBLjKOo3/enbVVA9t6l+bA0hTKHguyci2zR/wTWNrxPo+OUHP7YvmYp1RcCWGdmUAqKn/lj+9sS1i9ZialMCdi+eRUpDN2guNfHG4mtMrlqKK4/3hHw2Ajh4nhEJhD17TUxK584afo8/N5G/nvmP/F1X4g0GUEgndXh8q9dQCcEVigHvAi9PtCa8F6rRIpBLsHi/+y2+DDalGUlH4/wOAz+/nG1sboeDUYapWKchJN/00t0BXn4vfvbYB76BvygCYkZ8V1+wQVwDkMhmzi3LxjcMNJmPxXP0piQFTHVDiHRH+DxrW9JP9c58CAAAAAElFTkSuQmCC alt="baby195lxl's user avatar" width=32 height=32 class=bar-sm data-sf-original-src="https://www.gravatar.com/avatar/b5bbaf9fc5474cc4e4247d44a3c08e53?s=64&amp;d=identicon&amp;r=PG"></div></a>
 </div>
 <div class=user-details itemprop=author itemscope itemtype=http://schema.org/Person>
 <a href=https://stackoverflow.com/users/18971000/baby195lxl>baby195lxl</a><span class="d-none sf-hidden" itemprop=name>baby195lxl</span>
 <div class=-flair>
 <span class=reputation-score title="reputation score " dir=ltr>45</span><span title="6 bronze badges" aria-hidden=true><span class=badge3></span><span class=badgecount>6</span></span><span class=v-visible-sr>6 bronze badges</span>
 </div>
 </div>
</div>
 </div>
 </div>
 </div>
 
</div>
 <span class="d-none sf-hidden" itemprop=commentCount></span> 
 <div class="post-layout--right js-post-comments-component">
 <div id=comments-78210140 class="comments js-comments-container bt bc-black-200 mt12 dno sf-hidden" data-post-id=78210140 data-min-length=15>
 
 </div>
 <div id=comments-link-78210140 data-rep=50 data-reg=true>
 <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid answering questions in comments." href=# role=button>Add a comment</a>
 <span class="js-link-separator dno sf-hidden">&nbsp;|&nbsp;</span>
 <a class="js-show-link comments-link dno sf-hidden" title="Expand to show all comments on this post" href=# role=button></a>
 </div> 
 </div>
 </div>
</div>
<div class="js-zone-container zone-container-responsive sf-hidden">
 
 
</div>
 
 
 <div id=answers>
 <a name=tab-top></a>
 <div id=answers-header>
 <div class="answers-subheader d-flex ai-center mb8">
 <div class="flex--item fl1">
 <h2 class=mb0 data-answercount=1>
 1 Answer
 <span style=display:none itemprop=answerCount>1</span>
 </h2>
 </div>
 <div class=flex--item>
 
<div class="d-flex g4 gsx ai-center sm:fd-column sm:ai-start">
 <div class="d-flex fd-column ai-end sm:ai-start">
 <label class="flex--item fs-caption" for=answer-sort-dropdown-select-menu>
 Sorted by:
 </label>
 <a class="js-sort-preference-change s-link flex--item fs-fine d-none sf-hidden" data-value=ScoreDesc href="https://stackoverflow.com/questions/78210140/how-to-use-towerservice-and-towerlayer-to-create-axum-middleware?answertab=scoredesc#tab-top">
 Reset to default
 </a>
 </div>
 <div class="flex--item s-select">
 <select id=answer-sort-dropdown-select-menu>
                    <option value=scoredesc selected>
 Highest score (default)
 </option>
                    <option value=trending>
 Trending (recent votes count more)
 </option>
                    <option value=modifieddesc>
 Date modified (newest first)
 </option>
                    <option value=createdasc>
 Date created (oldest first)
 </option>
        </select>
 </div>
</div>
 </div>
 </div>
 
 </div>
 
<a name=78213014></a>
<div id=answer-78213014 class="answer js-answer accepted-answer js-accepted-answer" data-answerid=78213014 data-parentid=78210140 data-score=1 data-position-on-page=1 data-highest-scored=1 data-question-has-accepted-highest-score=1 itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer>
 <div class=post-layout>
 <div class="votecell post-layout--left">
 
<div class="js-voting-container d-flex jc-center fd-column ai-center gs4 fc-black-300" data-post-id=78213014 data-referrer=None>
 <button class="js-vote-up-btn flex--item s-btn s-btn__muted s-btn__outlined bar-pill bc-black-225 f:bc-theme-secondary-400 f:bg-theme-secondary-400 f:fc-black-050 h:bg-theme-primary-200" data-controller=s-tooltip data-s-tooltip-placement=right aria-pressed=false aria-label="Up vote" data-selected-classes="fc-theme-primary bc-theme-primary bg-theme-primary-100" data-unselected-classes="bc-black-225 f:bc-theme-secondary-400 f:bg-theme-secondary-400 f:fc-black-050 h:bg-theme-primary-200" aria-describedby=--stacks-s-tooltip-k2jl6rwd>
 <svg aria-hidden=true class="svg-icon iconArrowUp" width=18 height=18 viewBox="0 0 18 18"><path d="M1 12h16L9 4z"></path></svg>
 </button><div id=--stacks-s-tooltip-k2jl6rwd class="s-popover s-popover__tooltip sf-hidden" role=tooltip>This answer is useful</div>
 
 <div class="js-vote-count flex--item d-flex fd-column ai-center fc-theme-body-font fw-bold fs-subheading py4" itemprop=upvoteCount data-value=1>
 1
 </div>
 <button class="js-vote-down-btn flex--item mb8 s-btn s-btn__muted s-btn__outlined bar-pill bc-black-225 f:bc-theme-secondary-400 f:bg-theme-secondary-400 f:fc-black-050 h:bg-theme-primary-200" aria-pressed=false aria-label="Down vote" data-selected-classes="fc-theme-primary bc-theme-primary bg-theme-primary-100" data-unselected-classes="bc-black-225 f:bc-theme-secondary-400 f:bg-theme-secondary-400 f:fc-black-050 h:bg-theme-primary-200" data-s-tooltip-placement=right data-controller=" s-tooltip" aria-describedby=--stacks-s-tooltip-ymj6brsg>
 <svg aria-hidden=true class="svg-icon iconArrowDown" width=18 height=18 viewBox="0 0 18 18"><path d="M1 6h16l-8 8z"></path></svg>
 </button><div id=--stacks-s-tooltip-ymj6brsg class="s-popover s-popover__tooltip sf-hidden" role=tooltip>This answer is not useful</div>
 
 
<button class="js-saves-btn s-btn s-btn__unset c-pointer py4" type=button id=saves-btn-78213014 data-controller=s-tooltip data-s-tooltip-placement=right data-s-popover-placement aria-pressed=false data-post-id=78213014 data-post-type-id=2 data-user-privilege-for-post-click=-1 aria-controls data-s-popover-auto-show=false aria-describedby=--stacks-s-tooltip-5kopasoz>
 <svg aria-hidden=true class="fc-theme-primary-400 js-saves-btn-selected d-none svg-icon iconBookmark" width=18 height=18 viewBox="0 0 18 18"><path d="M3 17V3c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v14l-6-4z"></path></svg>
 <svg aria-hidden=true class="js-saves-btn-unselected svg-icon iconBookmarkAlt" width=18 height=18 viewBox="0 0 18 18"><path d="m9 10.6 4 2.66V3H5v10.26zM3 17V3c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v14l-6-4z"></path></svg>
</button><div id=--stacks-s-tooltip-5kopasoz class="s-popover s-popover__tooltip sf-hidden" role=tooltip>Save this answer.</div>
 <div class="js-accepted-answer-indicator flex--item fc-green-400 py6 mtn8" data-s-tooltip-placement=right title="Loading when this answer was accepted…" tabindex=0 role=note aria-label=Accepted>
 <div class=ta-center>
 <svg aria-hidden=true class="svg-icon iconCheckmarkLg" width=36 height=36 viewBox="0 0 36 36"><path d="m6 14 8 8L30 6v8L14 30l-8-8z"></path></svg>
 </div>
 </div>
 
 <a class="js-post-issue flex--item s-btn s-btn__unset c-pointer py6 mx-auto" href=https://stackoverflow.com/posts/78213014/timeline data-shortcut=T data-ks-title=timeline data-controller=s-tooltip data-s-tooltip-placement=right aria-label=Timeline aria-describedby=--stacks-s-tooltip-lewgor2t><svg aria-hidden=true class="mln2 mr0 svg-icon iconHistory" width=19 height=18 viewBox="0 0 19 18"><path d="M3 9a8 8 0 1 1 3.73 6.77L8.2 14.3A6 6 0 1 0 5 9l3.01-.01-4 4-4-4zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10z"></path></svg></a><div id=--stacks-s-tooltip-lewgor2t class="s-popover s-popover__tooltip sf-hidden" role=tooltip>Show activity on this post.</div>
</div>
 </div>
 
<div class="answercell post-layout--right">
 
 <div class="s-prose js-post-body" itemprop=text>
<p>The solution to your immediate problem is to wrap your <code>Err(...)</code> in <code>Box::pin(async { ... })</code> since you've said your <code>Self::Future</code> is a <code>BoxFuture</code>.</p>
<p>However, that is not the solution since you would then discover that you're using <code>S::Error</code> instead of <code>(StatusCode, &amp;'static str)</code> as your error type, which means you'd have to abide by the nested service's error type. Which you probably don't want. You could make a wrapping error enum that can express either your own error type or one from a nested service, but that isn't the solution either because...</p>
<p>Axum expects its <code>Service</code>s to <em>not fail</em>. You can see <a href=https://docs.rs/axum/latest/axum/routing/struct.Router.html#method.layer rel="nofollow noreferrer"><code>Router::layer</code></a> is constrained such that the layer's service's <code>Error</code> type is <code>Into&lt;Infallible&gt;</code> which means it can't return an error. This is because, while tower is designed such that error types are well-described, axum expects that errors are immediately converted to <code>Response</code>s.</p>
<p>So you <em>could</em> refactor your <code>Layer</code> and <code>Service</code> implementations to follow that, but the better solution would be to use axum's <a href=https://docs.rs/axum/latest/axum/middleware/fn.from_fn.html rel="nofollow noreferrer"><code>middleware::from_fn</code></a> helper function which makes it all much nicer to use:</p>
<pre class="lang-rust s-code-block"><code data-highlighted=yes class="hljs language-rust"><span class=hljs-keyword>use</span> axum::middleware::Next;

<span class=hljs-keyword>async</span> <span class=hljs-keyword>fn</span> <span class="hljs-title function_">auth_middleware</span>(req: Request, next: Next) <span class=hljs-punctuation>-&gt;</span> <span class=hljs-type>Result</span>&lt;Response, (StatusCode, &amp;<span class=hljs-symbol>'static</span> <span class=hljs-type>str</span>)&gt; {
    <span class=hljs-keyword>match</span> <span class="hljs-title function_ invoke__">has_permission</span>(&amp;req) {
        <span class="hljs-title function_ invoke__">Ok</span>(_) =&gt; {
            <span class=hljs-keyword>let</span> <span class=hljs-variable>response</span> = next.<span class="hljs-title function_ invoke__">run</span>(req).<span class=hljs-keyword>await</span>;
            <span class="hljs-title function_ invoke__">Ok</span>(response)
        }
        <span class="hljs-title function_ invoke__">Err</span>(_) =&gt; <span class="hljs-title function_ invoke__">Err</span>((StatusCode::BAD_REQUEST, <span class=hljs-string>"bad request"</span>)),
    }
}
</code></pre>
<pre class="lang-rust s-code-block"><code data-highlighted=yes class="hljs language-rust"><span class=hljs-keyword>let</span> <span class=hljs-variable>app</span> = Router::<span class="hljs-title function_ invoke__">new</span>()
    ...
    .<span class="hljs-title function_ invoke__">layer</span>(axum::middleware::<span class="hljs-title function_ invoke__">from_fn</span>(auth_middleware))
    ...
</code></pre>
 </div>
 <div class=mt24>
 <div class="d-flex fw-wrap ai-start jc-end gs8 gsy">
 <time itemprop=dateCreated datetime=2024-03-24T00:40:15></time>
 <div class="flex--item mr16" style="flex:1 1 100px">
 
<div class="js-post-menu pt2" data-post-id=78213014 data-post-type-id=2>
 <div class="d-flex gs8 s-anchors s-anchors__muted fw-wrap">
 <div class=flex--item>
 <a href=https://stackoverflow.com/a/78213014/23534397 rel=nofollow itemprop=url class="js-share-link js-gps-track" title="Short permalink to this answer" data-gps-track="post.click({ item: 2, priv: -1, post_type: 2 })" data-controller="se-share-sheet s-popover" data-se-share-sheet-title="Share a link to this answer" data-se-share-sheet-subtitle="(Includes your user id)" data-se-share-sheet-post-type=answer data-se-share-sheet-social="facebook twitter devto" data-se-share-sheet-location=2 data-se-share-sheet-license-url=https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f4.0%2f data-se-share-sheet-license-name="CC BY-SA 4.0" data-s-popover-placement=bottom-start aria-controls=se-share-sheet-1 data-action=" s-popover#toggle se-share-sheet#preventNavigation s-popover:show->se-share-sheet#willShow s-popover:shown->se-share-sheet#didShow" aria-expanded=false>Share</a><div class="s-popover z-dropdown s-anchors s-anchors__default sf-hidden" style=width:unset;max-width:28em id=se-share-sheet-1></div>
 </div>
 <div class=flex--item>
 <a href=https://stackoverflow.com/posts/78213014/edit class="js-suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: -1, post_type: 2 })" title="Revise and improve this post">Edit</a>
 </div>
 <div class=flex--item>
 <button type=button id=btnFollowPost-78213014 class="s-btn s-btn__link js-follow-post js-follow-answer js-gps-track" data-gps-track="post.click({ item: 14, priv: -1, post_type: 2 })" data-controller="s-tooltip " data-s-tooltip-placement=bottom data-s-popover-placement=bottom aria-controls aria-describedby=--stacks-s-tooltip-w7ogt2rz>
 Follow
 
 </button><div id=--stacks-s-tooltip-w7ogt2rz class="s-popover s-popover__tooltip sf-hidden" role=tooltip>Follow this answer to receive notifications</div>
 </div>
 </div>
 <div class=js-menu-popup-container></div>
</div>
 </div>
 <div class="post-signature flex--item fl0">
 <div class=user-info>
 <div class=d-flex>
 <div class="user-action-time fl-grow1">
 answered <span title="2024-03-24 00:40:15Z" class=relativetime>Mar 24 at 0:40</span>
 </div>
 
 </div>
 <div class=user-gravatar32>
 <a href=https://stackoverflow.com/users/2189130/kmdreko><div class=gravatar-wrapper-32><img src=data:image/png;base64,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 alt="kmdreko's user avatar" width=32 height=32 class=bar-sm data-sf-original-src="https://i.sstatic.net/trlri.png?s=64"></div></a>
 </div>
 <div class=user-details itemprop=author itemscope itemtype=http://schema.org/Person>
 <a href=https://stackoverflow.com/users/2189130/kmdreko>kmdreko</a><span class="d-none sf-hidden" itemprop=name>kmdreko</span>
 <div class=-flair>
 <span class=reputation-score title="reputation score 55,646" dir=ltr>55.6k</span><span title="6 gold badges" aria-hidden=true><span class=badge1></span><span class=badgecount>6</span></span><span class=v-visible-sr>6 gold badges</span><span title="86 silver badges" aria-hidden=true><span class=badge2></span><span class=badgecount>86</span></span><span class=v-visible-sr>86 silver badges</span><span title="152 bronze badges" aria-hidden=true><span class=badge3></span><span class=badgecount>152</span></span><span class=v-visible-sr>152 bronze badges</span>
 </div>
 </div>
</div>
 </div>
 </div>
 
 
 </div>
 
</div>
 <span class="d-none sf-hidden" itemprop=commentCount>4</span> 
 <div class="post-layout--right js-post-comments-component">
 <div id=comments-78213014 class="comments js-comments-container bt bc-black-200 mt12" data-post-id=78213014 data-min-length=15>
 <ul class="comments-list js-comments-list" data-remaining-comments-count=0 data-canpost=false data-cansee=true data-comments-unavailable=false data-addlink-disabled=true>
 <li id=comment-137888953 class="comment js-comment" data-comment-id=137888953 data-comment-owner-id=18971000 data-comment-score=0>
 <div class="js-comment-actions comment-actions">
 <div class="comment-score js-comment-score js-comment-edit-hide">
 </div>
 </div>
 <div class="comment-text js-comment-text-and-form">
 <div class="comment-body js-comment-edit-hide">
 
 <span class=comment-copy>Thank you for your response. However, may I ask if when writing middleware for Axum using the Layer and Service trait, is it only allowed to return values similar to <code>Err(e) =&gt; Box::pin(async move { Ok((StatusCode::UNAUTHORIZED, e).into_response()) })</code>?</span>
 
 <div class="d-inline-flex ai-center">
–&nbsp;<a href=https://stackoverflow.com/users/18971000/baby195lxl title="45 reputation" class="comment-user owner">baby195lxl</a>
 </div>
 <span class=comment-date dir=ltr><a class=comment-link href=#comment137888953_78213014>
 <span class=v-visible-sr>Commented</span>
 <span title="2024-03-24 10:53:37Z, License: CC BY-SA 4.0" class=relativetime-clean>Mar 24 at 10:53</span>
 </a></span>
 </div>
 </div>
 </li>
 <li id=comment-137890352 class="comment js-comment" data-comment-id=137890352 data-comment-owner-id=2189130 data-comment-score=0>
 <div class="js-comment-actions comment-actions">
 <div class="comment-score js-comment-score js-comment-edit-hide">
 </div>
 </div>
 <div class="comment-text js-comment-text-and-form">
 <div class="comment-body js-comment-edit-hide">
 
 <span class=comment-copy>@baby195lxl You can return any type that implements <code>IntoResponse</code> as the <code>Service::Response</code> type, but that will pretty much be <code>Response</code> for most cases. So, yes if I understand what you're asking.</span>
 
 <div class="d-inline-flex ai-center">
–&nbsp;<a href=https://stackoverflow.com/users/2189130/kmdreko title="55,646 reputation" class=comment-user>kmdreko</a>
 </div>
 <span class=comment-date dir=ltr><a class=comment-link href=#comment137890352_78213014>
 <span class=v-visible-sr>Commented</span>
 <span title="2024-03-24 15:17:40Z, License: CC BY-SA 4.0" class=relativetime-clean>Mar 24 at 15:17</span>
 </a></span>
 </div>
 </div>
 </li>
 <li id=comment-137890885 class="comment js-comment" data-comment-id=137890885 data-comment-owner-id=18971000 data-comment-score=0>
 <div class="js-comment-actions comment-actions">
 <div class="comment-score js-comment-score js-comment-edit-hide">
 </div>
 </div>
 <div class="comment-text js-comment-text-and-form">
 <div class="comment-body js-comment-edit-hide">
 
 <span class=comment-copy>What I mean is, even if encountering an error, do I still have to wrap it with Ok() before returning it, because you mentioned that the service's Error type is Into&lt;Infallible&gt;, which means it can't return an error. Or is it sufficient for the type inside Err() to implement the IntoResponse trait?</span>
 
 <div class="d-inline-flex ai-center">
–&nbsp;<a href=https://stackoverflow.com/users/18971000/baby195lxl title="45 reputation" class="comment-user owner">baby195lxl</a>
 </div>
 <span class=comment-date dir=ltr><a class=comment-link href=#comment137890885_78213014>
 <span class=v-visible-sr>Commented</span>
 <span title="2024-03-24 16:43:34Z, License: CC BY-SA 4.0" class=relativetime-clean>Mar 24 at 16:43</span>
 </a></span>
 </div>
 </div>
 </li>
 <li id=comment-137890888 class="comment js-comment" data-comment-id=137890888 data-comment-owner-id=2189130 data-comment-score=1>
 <div class="js-comment-actions comment-actions">
 <div class="comment-score js-comment-score js-comment-edit-hide">
 <span title="number of 'useful comment' votes received" class=cool>1</span>
 </div>
 </div>
 <div class="comment-text js-comment-text-and-form">
 <div class="comment-body js-comment-edit-hide">
 
 <span class=comment-copy>@baby195lxl you would return <code>Ok(...)</code></span>
 
 <div class="d-inline-flex ai-center">
–&nbsp;<a href=https://stackoverflow.com/users/2189130/kmdreko title="55,646 reputation" class=comment-user>kmdreko</a>
 </div>
 <span class=comment-date dir=ltr><a class=comment-link href=#comment137890888_78213014>
 <span class=v-visible-sr>Commented</span>
 <span title="2024-03-24 16:44:13Z, License: CC BY-SA 4.0" class=relativetime-clean>Mar 24 at 16:44</span>
 </a></span>
 </div>
 </div>
 </li>
 </ul>
 </div>
 <div id=comments-link-78213014 data-rep=50 data-reg=true>
 <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." href=# role=button>Add a comment</a>
 <span class="js-link-separator dno sf-hidden">&nbsp;|&nbsp;</span>
 <a class="js-show-link comments-link dno sf-hidden" title="Expand to show all comments on this post" href=# role=button></a>
 </div> 
 </div>
 </div>
</div>
<div class="js-zone-container zone-container-main">
 <div id=dfp-bmlb class="everyonelovesstackoverflow everyoneloves__bot-mid-leaderboard everyoneloves__leaderboard"></div>
 <div class=js-report-ad-button-container style=width:728px></div>
</div>
 <a name=new-answer></a>
 <form id=post-form action=/questions/78210140/answer/submit method=post class="js-add-answer-component post-form sf-hidden">
 
 
 
 
 
 
 
 
 
 </form>
 <h2 class=bottom-notice data-loc=1>
 <div>
Not the answer you're looking for? Browse other questions tagged <ul class="ml0 list-ls-none js-post-tag-list-wrapper d-inline"><li class="d-inline mr4 js-post-tag-list-item"><a href=https://stackoverflow.com/questions/tagged/rust class="s-tag post-tag js-gps-track" title="show questions tagged 'rust'" aria-label="show questions tagged 'rust'" rel=tag aria-labelledby=tag-rust-tooltip-container data-tag-menu-origin=Unknown>rust</a><li class="d-inline mr4 js-post-tag-list-item"><a href=https://stackoverflow.com/questions/tagged/jwt class="s-tag post-tag js-gps-track" title="show questions tagged 'jwt'" aria-label="show questions tagged 'jwt'" rel=tag aria-labelledby=tag-jwt-tooltip-container data-tag-menu-origin=Unknown>jwt</a><li class="d-inline mr4 js-post-tag-list-item"><a href=https://stackoverflow.com/questions/tagged/rust-axum class="s-tag post-tag js-gps-track" title="show questions tagged 'rust-axum'" aria-label="show questions tagged 'rust-axum'" rel=tag aria-labelledby=tag-rust-axum-tooltip-container data-tag-menu-origin=Unknown>rust-axum</a></ul> or <a href=https://stackoverflow.com/questions/ask>ask your own question</a>. </div>
 </h2>
 
 </div>
 </div>
 
<div id=sidebar class="show-votes sf-hidden" role=complementary aria-label=sidebar>
 
 
 
 
 
 
 
 
 
 
 
 
 
</div>
 </div>
<noscript><div><img src="/posts/78210140/ivc/f218?prg=fc2f8732-c385-4b7c-8d3f-db96add29347" class="dno" alt="" width="0" height="0"></div></noscript><div style=display:none id=js-codeblock-lang>lang-rust</div></div>
 
 
 </div>
 </div>
 
 
 
 
 <footer id=footer class="site-footer js-footer theme-light__forced" role=contentinfo>
 <div class=site-footer--container>
 <div class=site-footer--logo>
 <a href=https://stackoverflow.com/ aria-label="Stack Overflow"><svg aria-hidden=true class="native svg-icon iconGlyphMd" width=32 height=37 viewBox="0 0 32 37"><path fill=#BCBBBB d="M26 33v-9h4v13H0V24h4v9z"></path><path fill=#F48024 d="m21.5 0-2.7 2 9.9 13.3 2.7-2zM26 18.4 13.3 7.8l2.1-2.5 12.7 10.6zM9.1 15.2l15 7 1.4-3-15-7zm14 10.79.68-2.95-16.1-3.35L7 23zM23 30H7v-3h16z"></path></svg></a>
 </div>
 <nav class=site-footer--nav aria-label=Footer>
 <div class=site-footer--col>
 <h5 class=-title><a href=https://stackoverflow.com/ class=js-gps-track data-gps-track="footer.click({ location: 2, link: 15})">Stack Overflow</a></h5>
 <ul class="-list js-primary-footer-links">
 <li><a href=https://stackoverflow.com/questions class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 16})">Questions</a></li>
 <li><a href=https://stackoverflow.com/help class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 3 })">Help</a></li>
 <li><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 5 })" href="https://chat.stackoverflow.com/?tab=site&amp;host=stackoverflow.com">Chat</a></li>
 </ul>
 </div>
 <div class=site-footer--col>
 <h5 class=-title><a href=https://stackoverflow.co/ class=js-gps-track data-gps-track="footer.click({ location: 2, link: 19 })">Products</a></h5>
 <ul class=-list>
 <li><a href="https://stackoverflow.co/teams/?utm_medium=referral&amp;utm_source=stackoverflow-community&amp;utm_campaign=footer&amp;utm_content=teams" class="js-gps-track -link" data-ga='["teams traffic","footer - site nav","stackoverflow.com/teams",null,{"dimension4":"teams"}]' data-gps-track="footer.click({ location: 2, link: 29 })">Teams</a></li>
 <li><a href="https://stackoverflow.co/advertising/?utm_medium=referral&amp;utm_source=stackoverflow-community&amp;utm_campaign=footer&amp;utm_content=advertising" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 21 })">Advertising</a></li>
 <li><a href="https://stackoverflow.co/collectives/?utm_medium=referral&amp;utm_source=stackoverflow-community&amp;utm_campaign=footer&amp;utm_content=collectives" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 40 })">Collectives</a></li>
 <li><a href="https://stackoverflow.co/advertising/employer-branding/?utm_medium=referral&amp;utm_source=stackoverflow-community&amp;utm_campaign=footer&amp;utm_content=talent" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 20 })">Talent</a></li>
 </ul>
 </div>
 <div class=site-footer--col>
 <h5 class=-title><a class=js-gps-track data-gps-track="footer.click({ location: 2, link: 1 })" href=https://stackoverflow.co/>Company</a></h5>
 <ul class=-list>
 <li><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 1 })" href=https://stackoverflow.co/>About</a></li>
 <li><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 27 })" href=https://stackoverflow.co/company/press/>Press</a></li>
 <li><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 9 })" href=https://stackoverflow.co/company/work-here/>Work Here</a></li>
 <li><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 7 })" href=https://stackoverflow.com/legal>Legal</a></li>
 <li><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 8 })" href=https://stackoverflow.com/legal/privacy-policy>Privacy Policy</a></li>
 <li><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 37 })" href=https://stackoverflow.com/legal/terms-of-service/public>Terms of Service</a></li>
 <li><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 13 })" href=https://stackoverflow.com/contact>Contact Us</a></li>
 <li id=consent-footer-link><button type=button data-controller=cookie-settings data-action="click->cookie-settings#toggle" class="s-btn s-btn__link py4 js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 38 })" data-consent-popup-loader=footer>Cookie Settings</button></li>
 <li><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 39 })" href=https://stackoverflow.com/legal/cookie-policy>Cookie Policy</a></li>
 </ul>
 </div>
 <div class="site-footer--col site-footer--categories-nav">
 <div>
 <h5 class=-title><a href=https://stackexchange.com/ data-gps-track="footer.click({ location: 2, link: 30 })">Stack Exchange Network</a></h5>
 <ul class=-list>
 <li>
 <a href=https://stackexchange.com/sites#technology class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })">
 Technology
 </a>
 </li>
 <li>
 <a href=https://stackexchange.com/sites#culturerecreation class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })">
 Culture &amp; recreation
 </a>
 </li>
 <li>
 <a href=https://stackexchange.com/sites#lifearts class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })">
 Life &amp; arts
 </a>
 </li>
 <li>
 <a href=https://stackexchange.com/sites#science class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })">
 Science
 </a>
 </li>
 <li>
 <a href=https://stackexchange.com/sites#professional class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })">
 Professional
 </a>
 </li>
 <li>
 <a href=https://stackexchange.com/sites#business class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })">
 Business
 </a>
 </li>
 <li class="mt16 md:mt0">
 <a href=https://api.stackexchange.com/ class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })">
 API
 </a>
 </li>
 <li>
 <a href=https://data.stackexchange.com/ class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })">
 Data
 </a>
 </li>
 </ul>
 </div>
 </div>
 </nav>
 <div class="site-footer--copyright fs-fine md:mt24">
 <ul class="-list -social md:mb8">
 <li><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link:4 })" href="https://stackoverflow.blog/?blb=1">Blog</a></li>
 <li><a href=https://www.facebook.com/officialstackoverflow/ class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 31 })">Facebook</a></li>
 <li><a href=https://twitter.com/stackoverflow class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 32 })">Twitter</a></li>
 <li><a href=https://linkedin.com/company/stack-overflow class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 33 })">LinkedIn</a></li>
 <li><a href=https://www.instagram.com/thestackoverflow class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 36 })">Instagram</a></li>
 </ul>
 <p class=md:mb0>
Site design / logo © 2024 Stack Exchange Inc; user contributions licensed under <span class=td-underline><a href=https://stackoverflow.com/help/licensing>CC BY-SA</a></span>. <span id=svnrev>rev&nbsp;2024.7.30.13332</span>
 </p>
 </div>
 </div>
 </footer>
 
 
 
 
 
 
 
 
 
 
 
<div id=onetrust-consent-sdk><div class="onetrust-pc-dark-filter ot-hide ot-fade-in sf-hidden"></div></div>